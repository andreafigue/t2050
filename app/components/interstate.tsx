// @ts-nocheck
"use client";

import React, { useEffect, useRef, useState } from "react";
import mapboxgl from "mapbox-gl";
import * as d3 from "d3";
import * as d3Fetch from "d3-fetch";

mapboxgl.accessToken = process.env.NEXT_PUBLIC_MAPBOX_ACCESS_TOKEN;

const routes = [
  {
    id: "route-1",
    label: "I-5 WA",
    highway: "I-5",
    county: "Clark County",
    nb: [
      [-122.675045, 45.618140],  // Columbia River Bridge (Interstate Bridge)
      [-122.739470, 45.900791],  // Clark County Line (north)
    ],
    sb: [
      [-122.739629, 45.900399],
      [-122.675339, 45.618273],
    ],
  },
  

  {
    id: "route-3",
    label: "I-5 OR",
    highway: "I-5",
    county: "Portland, OR",

    nb: [
      [-122.769271, 45.291829], 
      [-122.675045, 45.618140],
    ],
    sb: [
      [-122.675339, 45.618273],
      [-122.769530, 45.291843], 
    ],
  },

  {
    id: "route-2",
    label: "I-205 WA",
    highway: "I-205",
    county: "Clark County",
    nb: [
      [-122.550088, 45.597248],  // Columbia River (Glenn Jackson Bridge)
      [-122.654696, 45.725555],  // Junction with I-5 (Salmon Creek area)
    ],
    sb: [
      [-122.656403, 45.729530],
      [-122.550391, 45.597354],
    ],
  },
  {
    id: "route-4",
    label: "I-205 OR",
    highway: "I-205",
    county: "Portland, OR",
    nb: [
      [-122.759200, 45.365089], 
      [-122.550088, 45.597248],
    ],
    sb: [

      [-122.550423, 45.597266],
      [-122.761453, 45.361233], 
    ],
  },
];

const HARDCODED_ROUTES = {
  // I-5 NB route
  "route-1-nb": [[-122.675035,45.618137],[-122.661885,45.637077],[-122.661698,45.650181],[-122.667164,45.665328],[-122.663904,45.687482],[-122.652871,45.709648],[-122.654875,45.725497],[-122.676525,45.795737],[-122.704618,45.856541],[-122.706993,45.867503],[-122.714182,45.875713],[-122.730526,45.886047],[-122.739513,45.900779]],

  // I-205 NB route
  "route-2-nb": [[-122.550131,45.597241],[-122.552788,45.612003],[-122.558746,45.620154],[-122.559701,45.632873],[-122.566817,45.651622],[-122.577311,45.664296],[-122.586001,45.678236],[-122.599469,45.686375],[-122.613242,45.697468],[-122.624742,45.700892],[-122.632227,45.70774],[-122.645271,45.71541],[-122.652446,45.720747],[-122.654733,45.725548]],

  // I-5 SB route
  "route-1-sb": [[-122.739646,45.900394],[-122.730861,45.885981],[-122.714354,45.875462],[-122.707977,45.868073],[-122.67694,45.795612],[-122.656331,45.729636],[-122.653152,45.709973],[-122.664189,45.687501],[-122.66741,45.66524],[-122.661968,45.650295],[-122.662096,45.637503],[-122.675311,45.618265]],

  // I-205 SB route
  "route-2-sb": [[-122.656315,45.729537],[-122.656062,45.724093],[-122.65423,45.721411],[-122.63196,45.707078],[-122.625215,45.700809],[-122.613456,45.697187],[-122.600909,45.686962],[-122.586016,45.677501],[-122.5776,45.66409],[-122.568358,45.653104],[-122.560471,45.633998],[-122.559099,45.620036],[-122.553135,45.612165],[-122.550379,45.597356]],

  "route-3-nb": [[-122.769280, 45.291830], [-122.769280, 45.293340], [-122.769260, 45.293980], [-122.769240, 45.294400], [-122.769230, 45.294750], [-122.769220, 45.294970], [-122.769190, 45.295280], [-122.769170, 45.295590], [-122.769130, 45.295940], [-122.769080, 45.296510], [-122.769060, 45.296940], [-122.769050, 45.297290], [-122.769040, 45.297660], [-122.769040, 45.298150], [-122.769040, 45.298460], [-122.769040, 45.299430], [-122.769050, 45.299700], [-122.769070, 45.301400], [-122.769080, 45.302110], [-122.769070, 45.302640], [-122.769070, 45.303200], [-122.769070, 45.304160], [-122.769070, 45.306920], [-122.769080, 45.310290], [-122.769100, 45.312570], [-122.769100, 45.317350], [-122.769100, 45.317380], [-122.769100, 45.317560], [-122.769110, 45.318710], [-122.769110, 45.321390], [-122.769110, 45.322330], [-122.769110, 45.324070], [-122.769120, 45.327780], [-122.769110, 45.331470], [-122.769110, 45.334820], [-122.769110, 45.334970], [-122.769100, 45.335910], [-122.769090, 45.336090], [-122.769080, 45.336750], [-122.769080, 45.337600], [-122.769060, 45.337890], [-122.769060, 45.337890], [-122.769060, 45.337900], [-122.769040, 45.338130], [-122.769010, 45.338460], [-122.768940, 45.339120], [-122.768900, 45.339390], [-122.768840, 45.339790], [-122.768730, 45.340440], [-122.768570, 45.341110], [-122.768440, 45.341720], [-122.768300, 45.342280], [-122.768150, 45.342770], [-122.768030, 45.343210], [-122.767870, 45.343680], [-122.767540, 45.344580], [-122.767180, 45.345500], [-122.766880, 45.346300], [-122.766260, 45.347850], [-122.765630, 45.349410], [-122.765210, 45.350470], [-122.764780, 45.351540], [-122.763930, 45.353630], [-122.763860, 45.353810], [-122.763790, 45.353980], [-122.762760, 45.356490], [-122.761880, 45.358690], [-122.761280, 45.360180], [-122.760710, 45.361600], [-122.760410, 45.362350], [-122.760100, 45.363110], [-122.759850, 45.363730], [-122.759340, 45.365070], [-122.758910, 45.366130], [-122.758890, 45.366180], [-122.757970, 45.368410], [-122.757730, 45.369010], [-122.757350, 45.369960], [-122.756760, 45.371440], [-122.756540, 45.371980], [-122.755540, 45.374470], [-122.755170, 45.375340], [-122.755100, 45.375510], [-122.754700, 45.376480], [-122.754300, 45.377520], [-122.754210, 45.377750], [-122.753930, 45.378420], [-122.753760, 45.378840], [-122.753710, 45.379020], [-122.753540, 45.379460], [-122.753290, 45.380060], [-122.753040, 45.380700], [-122.752890, 45.381070], [-122.752660, 45.381680], [-122.752510, 45.382100], [-122.752480, 45.382160], [-122.752480, 45.382160], [-122.752360, 45.382490], [-122.752350, 45.382510], [-122.752230, 45.382800], [-122.751900, 45.383580], [-122.751660, 45.384240], [-122.751570, 45.384510], [-122.751290, 45.385280], [-122.750990, 45.386110], [-122.750650, 45.387090], [-122.750380, 45.387910], [-122.750230, 45.388320], [-122.750190, 45.388430], [-122.750120, 45.388610], [-122.750040, 45.388820], [-122.749570, 45.390020], [-122.748750, 45.392090], [-122.748330, 45.393140], [-122.748130, 45.393640], [-122.748000, 45.394010], [-122.747630, 45.394920], [-122.747180, 45.396030], [-122.746910, 45.396730], [-122.746660, 45.397290], [-122.746380, 45.398000], [-122.746380, 45.398000], [-122.746160, 45.398570], [-122.745560, 45.400030], [-122.745270, 45.400770], [-122.745020, 45.401480], [-122.744790, 45.402200], [-122.744590, 45.402920], [-122.744450, 45.403490], [-122.744260, 45.404370], [-122.744170, 45.404870], [-122.744110, 45.405240], [-122.744100, 45.405340], [-122.744000, 45.406100], [-122.743970, 45.406390], [-122.743940, 45.406660], [-122.743920, 45.406930], [-122.743870, 45.407760], [-122.743860, 45.407890], [-122.743860, 45.408070], [-122.743850, 45.408250], [-122.743850, 45.409030], [-122.743860, 45.409640], [-122.743860, 45.409640], [-122.743860, 45.409770], [-122.743860, 45.410410], [-122.743850, 45.411930], [-122.743860, 45.413220], [-122.743870, 45.414270], [-122.743880, 45.414750], [-122.743880, 45.415140], [-122.743880, 45.415190], [-122.743880, 45.415380], [-122.743890, 45.415980], [-122.743890, 45.416410], [-122.743890, 45.416900], [-122.743950, 45.417740], [-122.743950, 45.418830], [-122.743950, 45.420040], [-122.743950, 45.420570], [-122.743960, 45.421160], [-122.743970, 45.421810], [-122.743990, 45.423860], [-122.743990, 45.423860], [-122.744010, 45.425700], [-122.744010, 45.426020], [-122.744010, 45.426130], [-122.744030, 45.427080], [-122.744040, 45.428130], [-122.744050, 45.429590], [-122.744050, 45.430230], [-122.744060, 45.431270], [-122.744070, 45.431500], [-122.744080, 45.432780], [-122.744080, 45.433210], [-122.744090, 45.433520], [-122.744080, 45.434620], [-122.744080, 45.434920], [-122.744100, 45.435770], [-122.744110, 45.436340], [-122.744100, 45.436830], [-122.744070, 45.437160], [-122.744020, 45.437500], [-122.743930, 45.437880], [-122.743860, 45.438100], [-122.743770, 45.438390], [-122.743630, 45.438710], [-122.743450, 45.439070], [-122.743310, 45.439330], [-122.743140, 45.439600], [-122.743030, 45.439790], [-122.742880, 45.440010], [-122.742470, 45.440540], [-122.742240, 45.440820], [-122.741950, 45.441150], [-122.741620, 45.441540], [-122.741450, 45.441740], [-122.740900, 45.442370], [-122.740720, 45.442580], [-122.740470, 45.442870], [-122.740330, 45.443030], [-122.740220, 45.443160], [-122.740030, 45.443360], [-122.739970, 45.443420], [-122.739820, 45.443560], [-122.739680, 45.443690], [-122.739500, 45.443840], [-122.739360, 45.443950], [-122.739200, 45.444060], [-122.739040, 45.444160], [-122.738810, 45.444300], [-122.738630, 45.444390], [-122.738440, 45.444490], [-122.738130, 45.444620], [-122.737890, 45.444710], [-122.737740, 45.444760], [-122.737740, 45.444760], [-122.737620, 45.444790], [-122.737450, 45.444850], [-122.737240, 45.444900], [-122.736910, 45.444980], [-122.735710, 45.445220], [-122.735440, 45.445270], [-122.734640, 45.445410], [-122.734240, 45.445510], [-122.733620, 45.445690], [-122.733380, 45.445780], [-122.733080, 45.445900], [-122.732700, 45.446080], [-122.732390, 45.446240], [-122.732040, 45.446430], [-122.731800, 45.446580], [-122.731590, 45.446720], [-122.731350, 45.446900], [-122.730750, 45.447460], [-122.730580, 45.447610], [-122.730300, 45.447970], [-122.729740, 45.448790], [-122.729050, 45.449900], [-122.728350, 45.451010], [-122.728240, 45.451170], [-122.728020, 45.451430], [-122.727800, 45.451670], [-122.727470, 45.451960], [-122.727200, 45.452170], [-122.726900, 45.452380], [-122.726470, 45.452640], [-122.726220, 45.452780], [-122.725830, 45.452940], [-122.725440, 45.453090], [-122.725020, 45.453220], [-122.724570, 45.453330], [-122.724260, 45.453400], [-122.723900, 45.453460], [-122.723630, 45.453500], [-122.723330, 45.453530], [-122.722990, 45.453550], [-122.722520, 45.453550], [-122.722090, 45.453540], [-122.721380, 45.453510], [-122.721050, 45.453490], [-122.720520, 45.453470], [-122.719990, 45.453440], [-122.719860, 45.453430], [-122.719860, 45.453430], [-122.719850, 45.453430], [-122.719510, 45.453420], [-122.718950, 45.453410], [-122.718260, 45.453440], [-122.717350, 45.453620], [-122.717050, 45.453670], [-122.716870, 45.453720], [-122.716850, 45.453730], [-122.716640, 45.453800], [-122.716540, 45.453830], [-122.716030, 45.454020], [-122.715440, 45.454310], [-122.715040, 45.454500], [-122.714380, 45.454870], [-122.712400, 45.455960], [-122.712030, 45.456170], [-122.711200, 45.456620], [-122.710500, 45.457010], [-122.709130, 45.457760], [-122.707730, 45.458530], [-122.706650, 45.459140], [-122.705610, 45.459760], [-122.705350, 45.459910], [-122.704820, 45.460210], [-122.704260, 45.460530], [-122.703750, 45.460830], [-122.702160, 45.461750], [-122.701560, 45.462090], [-122.700700, 45.462590], [-122.700700, 45.462590], [-122.700370, 45.462790], [-122.699530, 45.463250], [-122.698840, 45.463640], [-122.698540, 45.463790], [-122.697890, 45.464140], [-122.697450, 45.464350], [-122.697240, 45.464450], [-122.696310, 45.464900], [-122.695710, 45.465210], [-122.695500, 45.465320], [-122.695390, 45.465370], [-122.695020, 45.465590], [-122.694670, 45.465780], [-122.694170, 45.466110], [-122.694170, 45.466110], [-122.694100, 45.466160], [-122.694010, 45.466220], [-122.692960, 45.466880], [-122.692550, 45.467150], [-122.692120, 45.467470], [-122.691750, 45.467790], [-122.691260, 45.468260], [-122.690900, 45.468640], [-122.690900, 45.468640], [-122.690510, 45.469050], [-122.690250, 45.469300], [-122.690080, 45.469430], [-122.689910, 45.469550], [-122.689720, 45.469660], [-122.689540, 45.469760], [-122.689290, 45.469870], [-122.689070, 45.469950], [-122.688740, 45.470040], [-122.688170, 45.470150], [-122.688080, 45.470160], [-122.687850, 45.470190], [-122.687820, 45.470190], [-122.687520, 45.470230], [-122.687170, 45.470260], [-122.686790, 45.470280], [-122.686330, 45.470290], [-122.686050, 45.470290], [-122.686020, 45.470290], [-122.685700, 45.470270], [-122.685690, 45.470270], [-122.685370, 45.470250], [-122.685050, 45.470220], [-122.684440, 45.470140], [-122.683800, 45.470050], [-122.683350, 45.469960], [-122.682890, 45.469880], [-122.682870, 45.469870], [-122.682870, 45.469870], [-122.682860, 45.469870], [-122.681960, 45.469710], [-122.681440, 45.469630], [-122.680790, 45.469560], [-122.680310, 45.469560], [-122.679820, 45.469610], [-122.679570, 45.469650], [-122.679250, 45.469740], [-122.678980, 45.469830], [-122.678670, 45.469960], [-122.678650, 45.469980], [-122.678560, 45.470030], [-122.678450, 45.470090], [-122.678370, 45.470140], [-122.678360, 45.470140], [-122.678070, 45.470350], [-122.677860, 45.470540], [-122.677770, 45.470610], [-122.677520, 45.470930], [-122.677420, 45.471120], [-122.677340, 45.471320], [-122.677270, 45.471530], [-122.677250, 45.471870], [-122.677260, 45.472080], [-122.677300, 45.472290], [-122.677380, 45.472570], [-122.677490, 45.472880], [-122.677630, 45.473230], [-122.678420, 45.475300], [-122.678550, 45.475780], [-122.678630, 45.476180], [-122.678660, 45.476460], [-122.678710, 45.476880], [-122.678710, 45.477230], [-122.678710, 45.477740], [-122.678700, 45.478340], [-122.678700, 45.479730], [-122.678710, 45.480750], [-122.678710, 45.480910], [-122.678720, 45.481240], [-122.678730, 45.481570], [-122.678740, 45.481890], [-122.678770, 45.482180], [-122.678780, 45.482430], [-122.678810, 45.482720], [-122.678950, 45.483730], [-122.679130, 45.485090], [-122.679160, 45.485350], [-122.679170, 45.485600], [-122.679140, 45.485980], [-122.679070, 45.486300], [-122.678950, 45.486620], [-122.678760, 45.486950], [-122.678670, 45.487060], [-122.678460, 45.487320], [-122.678390, 45.487410], [-122.678150, 45.487630], [-122.677430, 45.488190], [-122.677010, 45.488490], [-122.676420, 45.488950], [-122.676380, 45.488980], [-122.676200, 45.489120], [-122.676050, 45.489240], [-122.675700, 45.489540], [-122.675200, 45.490060], [-122.674950, 45.490340], [-122.674790, 45.490550], [-122.674660, 45.490730], [-122.674530, 45.490910], [-122.674370, 45.491160], [-122.674130, 45.491560], [-122.673930, 45.491970], [-122.673860, 45.492130], [-122.673790, 45.492300], [-122.673730, 45.492490], [-122.673690, 45.492610], [-122.673650, 45.492710], [-122.673650, 45.492730], [-122.673600, 45.492930], [-122.673550, 45.493150], [-122.673550, 45.493150], [-122.673520, 45.493330], [-122.673470, 45.493600], [-122.673420, 45.494280], [-122.673390, 45.495270], [-122.673300, 45.497340], [-122.673260, 45.497900], [-122.673210, 45.498500], [-122.673200, 45.498660], [-122.673150, 45.498770], [-122.673070, 45.499430], [-122.673030, 45.500130], [-122.673010, 45.500490], [-122.673000, 45.500670], [-122.672980, 45.501080], [-122.672980, 45.501220], [-122.672970, 45.501460], [-122.672970, 45.501510], [-122.672970, 45.501730], [-122.672990, 45.501900], [-122.673020, 45.502050], [-122.673060, 45.502180], [-122.673150, 45.502440], [-122.673420, 45.503080], [-122.673600, 45.503490], [-122.673670, 45.503690], [-122.673730, 45.503920], [-122.673770, 45.504100], [-122.673780, 45.504320], [-122.673770, 45.504530], [-122.673750, 45.504650], [-122.673720, 45.504750], [-122.673700, 45.504820], [-122.673660, 45.504930], [-122.673600, 45.505050], [-122.673470, 45.505250], [-122.673360, 45.505380], [-122.673200, 45.505560], [-122.673020, 45.505700], [-122.672810, 45.505850], [-122.672640, 45.505970], [-122.672380, 45.506110], [-122.672190, 45.506220], [-122.671950, 45.506340], [-122.671320, 45.506670], [-122.671040, 45.506810], [-122.670810, 45.506930], [-122.669060, 45.507980], [-122.667650, 45.508820], [-122.667400, 45.508980], [-122.667220, 45.509130], [-122.667110, 45.509230], [-122.667020, 45.509330], [-122.666920, 45.509460], [-122.666830, 45.509600], [-122.666750, 45.509780], [-122.666700, 45.509930], [-122.666660, 45.510130], [-122.666660, 45.510420], [-122.666670, 45.510560], [-122.666690, 45.510700], [-122.666730, 45.510860], [-122.666770, 45.510970], [-122.666820, 45.511080], [-122.666940, 45.511320], [-122.667190, 45.511770], [-122.667320, 45.512000], [-122.667470, 45.512240], [-122.667510, 45.512330], [-122.667550, 45.512430], [-122.667650, 45.512720], [-122.667710, 45.513020], [-122.667740, 45.513230], [-122.667750, 45.513410], [-122.667750, 45.513610], [-122.667740, 45.513840], [-122.667720, 45.514050], [-122.667670, 45.514330], [-122.667620, 45.514610], [-122.667540, 45.514890], [-122.667270, 45.516090], [-122.667110, 45.516820], [-122.666940, 45.517440], [-122.666830, 45.517860], [-122.666690, 45.518240], [-122.666230, 45.519350], [-122.665880, 45.520290], [-122.665810, 45.520470], [-122.665610, 45.521110], [-122.665540, 45.521480], [-122.665520, 45.521550], [-122.665440, 45.522120], [-122.665410, 45.522580], [-122.665400, 45.522730], [-122.665360, 45.523430], [-122.665330, 45.524130], [-122.665280, 45.525430], [-122.665200, 45.527530], [-122.665200, 45.527640], [-122.665170, 45.528270], [-122.665140, 45.528890], [-122.665140, 45.528900], [-122.665140, 45.529010], [-122.665140, 45.529130], [-122.665140, 45.529800], [-122.665140, 45.529800], [-122.665140, 45.531000], [-122.665150, 45.531160], [-122.665240, 45.531970], [-122.665260, 45.532030], [-122.665410, 45.532600], [-122.665490, 45.532840], [-122.665570, 45.533050], [-122.665640, 45.533230], [-122.665750, 45.533460], [-122.665860, 45.533690], [-122.666020, 45.533990], [-122.666150, 45.534200], [-122.666150, 45.534200], [-122.666200, 45.534280], [-122.666200, 45.534290], [-122.666280, 45.534410], [-122.666310, 45.534450], [-122.666400, 45.534590], [-122.666610, 45.534860], [-122.666650, 45.534920], [-122.666680, 45.534950], [-122.666780, 45.535070], [-122.666810, 45.535110], [-122.666840, 45.535150], [-122.666870, 45.535180], [-122.666950, 45.535280], [-122.667400, 45.535820], [-122.667640, 45.536100], [-122.667660, 45.536130], [-122.667770, 45.536260], [-122.667790, 45.536280], [-122.667980, 45.536510], [-122.668310, 45.536900], [-122.668600, 45.537250], [-122.668650, 45.537310], [-122.668650, 45.537310], [-122.668670, 45.537330], [-122.668800, 45.537490], [-122.668900, 45.537610], [-122.669780, 45.538670], [-122.670090, 45.539040], [-122.670470, 45.539510], [-122.670590, 45.539660], [-122.670900, 45.540030], [-122.671350, 45.540570], [-122.671500, 45.540760], [-122.671640, 45.540860], [-122.671860, 45.541080], [-122.672140, 45.541350], [-122.672430, 45.541620], [-122.673220, 45.542270], [-122.673460, 45.542480], [-122.675420, 45.544100], [-122.676480, 45.544980], [-122.676490, 45.544990], [-122.677350, 45.545710], [-122.677630, 45.545970], [-122.677800, 45.546160], [-122.677930, 45.546310], [-122.678130, 45.546610], [-122.678280, 45.546860], [-122.678370, 45.547050], [-122.678450, 45.547270], [-122.678520, 45.547490], [-122.678560, 45.547690], [-122.678590, 45.548310], [-122.678590, 45.548770], [-122.678570, 45.550920], [-122.678570, 45.551060], [-122.678550, 45.552860], [-122.678540, 45.553600], [-122.678530, 45.554480], [-122.678520, 45.554730], [-122.678520, 45.554800], [-122.678510, 45.555190], [-122.678500, 45.555950], [-122.678500, 45.556160], [-122.678500, 45.556300], [-122.678500, 45.557150], [-122.678480, 45.558900], [-122.678470, 45.559080], [-122.678460, 45.560260], [-122.678490, 45.561820], [-122.678490, 45.562020], [-122.678510, 45.562580], [-122.678520, 45.562760], [-122.678540, 45.563380], [-122.678550, 45.563710], [-122.678550, 45.564280], [-122.678550, 45.565100], [-122.678550, 45.565960], [-122.678540, 45.566260], [-122.678540, 45.566310], [-122.678540, 45.566490], [-122.678540, 45.566550], [-122.678530, 45.567230], [-122.678540, 45.568300], [-122.678570, 45.569730], [-122.678570, 45.569730], [-122.678570, 45.570090], [-122.678570, 45.570100], [-122.678580, 45.570500], [-122.678590, 45.571030], [-122.678600, 45.571600], [-122.678590, 45.571810], [-122.678580, 45.572320], [-122.678580, 45.572940], [-122.678580, 45.573120], [-122.678570, 45.574000], [-122.678560, 45.574700], [-122.678550, 45.575370], [-122.678530, 45.577120], [-122.678530, 45.577300], [-122.678530, 45.577320], [-122.678520, 45.577850], [-122.678480, 45.580770], [-122.678480, 45.581330], [-122.678500, 45.581790], [-122.678520, 45.582000], [-122.678560, 45.582280], [-122.678600, 45.582540], [-122.678670, 45.582920], [-122.678750, 45.583210], [-122.678850, 45.583550], [-122.678960, 45.583890], [-122.679100, 45.584230], [-122.679180, 45.584420], [-122.679400, 45.584920], [-122.680100, 45.586460], [-122.680530, 45.587390], [-122.681940, 45.590640], [-122.682100, 45.591020], [-122.682590, 45.591950], [-122.682990, 45.592850], [-122.683540, 45.594070], [-122.683820, 45.594690], [-122.684070, 45.595290], [-122.684160, 45.595550], [-122.684230, 45.595820], [-122.684300, 45.596110], [-122.684350, 45.596360], [-122.684380, 45.596550], [-122.684400, 45.596730], [-122.684410, 45.596950], [-122.684420, 45.597230], [-122.684410, 45.597470], [-122.684390, 45.597720], [-122.684350, 45.598050], [-122.684280, 45.598410], [-122.684210, 45.598730], [-122.684210, 45.598730], [-122.684210, 45.598730], [-122.684190, 45.598820], [-122.684080, 45.599250], [-122.683980, 45.599580], [-122.683840, 45.600040], [-122.683590, 45.600880], [-122.683450, 45.601400], [-122.683280, 45.601960], [-122.683140, 45.602440], [-122.683080, 45.602630], [-122.682880, 45.603330], [-122.682830, 45.603470], [-122.682720, 45.603860], [-122.682690, 45.603960], [-122.682630, 45.604130], [-122.682490, 45.604630], [-122.682490, 45.604630], [-122.682390, 45.604940], [-122.682290, 45.605250], [-122.682200, 45.605560], [-122.681970, 45.606180], [-122.681870, 45.606420], [-122.681750, 45.606680], [-122.681500, 45.607170], [-122.681360, 45.607450], [-122.681200, 45.607740], [-122.680820, 45.608380], [-122.680500, 45.608920], [-122.680450, 45.608990], [-122.679980, 45.609790], [-122.679940, 45.609860], [-122.679740, 45.610170], [-122.679230, 45.611070], [-122.679010, 45.611480], [-122.678770, 45.611910], [-122.678270, 45.612720], [-122.676630, 45.615470], [-122.675080, 45.618070], [-122.675040, 45.618140]],

  "route-3-sb": [[-122.675310, 45.618270], [-122.675380, 45.618150], [-122.675420, 45.618090], [-122.678380, 45.613130], [-122.678560, 45.612800], [-122.678710, 45.612540], [-122.678870, 45.612240], [-122.679360, 45.611290], [-122.679470, 45.611070], [-122.679560, 45.610900], [-122.680090, 45.609960], [-122.680400, 45.609440], [-122.680650, 45.609050], [-122.681020, 45.608430], [-122.681390, 45.607810], [-122.681550, 45.607510], [-122.681700, 45.607220], [-122.681940, 45.606730], [-122.682060, 45.606480], [-122.682160, 45.606220], [-122.682270, 45.605950], [-122.682390, 45.605630], [-122.682560, 45.605130], [-122.682810, 45.604260], [-122.682870, 45.604060], [-122.682960, 45.603730], [-122.683000, 45.603600], [-122.683030, 45.603500], [-122.683130, 45.603160], [-122.683230, 45.602800], [-122.683300, 45.602550], [-122.683620, 45.601470], [-122.683830, 45.600880], [-122.684130, 45.599830], [-122.684390, 45.598810], [-122.684500, 45.598340], [-122.684560, 45.597950], [-122.684590, 45.597720], [-122.684610, 45.597490], [-122.684610, 45.597100], [-122.684600, 45.596740], [-122.684550, 45.596360], [-122.684500, 45.596080], [-122.684460, 45.595890], [-122.684420, 45.595740], [-122.684330, 45.595450], [-122.684290, 45.595330], [-122.684040, 45.594720], [-122.683350, 45.593190], [-122.683270, 45.593010], [-122.682370, 45.591010], [-122.682210, 45.590610], [-122.680730, 45.587340], [-122.680100, 45.585970], [-122.679600, 45.584880], [-122.679370, 45.584350], [-122.679170, 45.583860], [-122.679110, 45.583690], [-122.679070, 45.583550], [-122.679070, 45.583550], [-122.678950, 45.583180], [-122.678760, 45.582250], [-122.678730, 45.581950], [-122.678710, 45.577920], [-122.678710, 45.577290], [-122.678710, 45.577110], [-122.678710, 45.577070], [-122.678730, 45.576900], [-122.678730, 45.576530], [-122.678740, 45.575830], [-122.678740, 45.575830], [-122.678750, 45.574820], [-122.678750, 45.574570], [-122.678770, 45.573140], [-122.678770, 45.572800], [-122.678760, 45.572070], [-122.678760, 45.571210], [-122.678730, 45.569760], [-122.678720, 45.569500], [-122.678720, 45.568990], [-122.678720, 45.568520], [-122.678720, 45.568310], [-122.678750, 45.566950], [-122.678750, 45.566320], [-122.678750, 45.564870], [-122.678760, 45.563560], [-122.678760, 45.563110], [-122.678690, 45.562010], [-122.678660, 45.560530], [-122.678670, 45.559270], [-122.678670, 45.559080], [-122.678670, 45.558900], [-122.678690, 45.557960], [-122.678710, 45.557010], [-122.678710, 45.557000], [-122.678710, 45.556850], [-122.678710, 45.556730], [-122.678730, 45.556170], [-122.678730, 45.555990], [-122.678740, 45.555750], [-122.678730, 45.554800], [-122.678730, 45.554730], [-122.678730, 45.554620], [-122.678730, 45.554550], [-122.678730, 45.554480], [-122.678730, 45.553610], [-122.678760, 45.553440], [-122.678760, 45.551060], [-122.678760, 45.550880], [-122.678770, 45.548790], [-122.678770, 45.548600], [-122.678760, 45.548330], [-122.678750, 45.548080], [-122.678730, 45.547820], [-122.678700, 45.547630], [-122.678660, 45.547470], [-122.678620, 45.547310], [-122.678560, 45.547140], [-122.678470, 45.546920], [-122.678360, 45.546710], [-122.678190, 45.546440], [-122.678010, 45.546200], [-122.677890, 45.546060], [-122.677660, 45.545830], [-122.677480, 45.545660], [-122.677270, 45.545480], [-122.676700, 45.545010], [-122.676350, 45.544720], [-122.676250, 45.544640], [-122.675440, 45.543960], [-122.674280, 45.542980], [-122.673110, 45.541980], [-122.672970, 45.541860], [-122.672920, 45.541820], [-122.672800, 45.541720], [-122.672370, 45.541370], [-122.672070, 45.541080], [-122.671910, 45.540900], [-122.671720, 45.540700], [-122.671620, 45.540570], [-122.670950, 45.539800], [-122.670710, 45.539510], [-122.670030, 45.538710], [-122.669810, 45.538450], [-122.669780, 45.538400], [-122.669270, 45.537800], [-122.668900, 45.537380], [-122.668810, 45.537280], [-122.668670, 45.537120], [-122.668570, 45.537010], [-122.668040, 45.536380], [-122.667790, 45.536080], [-122.667660, 45.535930], [-122.667530, 45.535780], [-122.667080, 45.535230], [-122.667040, 45.535180], [-122.666910, 45.535020], [-122.666880, 45.534980], [-122.666810, 45.534890], [-122.666690, 45.534730], [-122.666690, 45.534730], [-122.666540, 45.534540], [-122.666480, 45.534450], [-122.666370, 45.534290], [-122.666320, 45.534210], [-122.666170, 45.533960], [-122.666030, 45.533710], [-122.665920, 45.533500], [-122.665830, 45.533310], [-122.665700, 45.533000], [-122.665560, 45.532580], [-122.665510, 45.532400], [-122.665490, 45.532310], [-122.665440, 45.532030], [-122.665410, 45.531680], [-122.665370, 45.531350], [-122.665340, 45.531000], [-122.665340, 45.529800], [-122.665360, 45.529000], [-122.665360, 45.528890], [-122.665360, 45.528890], [-122.665360, 45.528770], [-122.665360, 45.528640], [-122.665360, 45.528590], [-122.665330, 45.528370], [-122.665330, 45.528240], [-122.665330, 45.528210], [-122.665330, 45.528210], [-122.665330, 45.527900], [-122.665350, 45.527530], [-122.665450, 45.525440], [-122.665470, 45.525040], [-122.665470, 45.524610], [-122.665480, 45.523910], [-122.665520, 45.522720], [-122.665560, 45.522280], [-122.665610, 45.521870], [-122.665680, 45.521530], [-122.665740, 45.521410], [-122.665750, 45.521390], [-122.665760, 45.521340], [-122.665760, 45.521320], [-122.665790, 45.521180], [-122.665810, 45.521130], [-122.665820, 45.521080], [-122.665830, 45.521060], [-122.665850, 45.520980], [-122.665900, 45.520750], [-122.665980, 45.520520], [-122.666060, 45.520250], [-122.666130, 45.520060], [-122.666400, 45.519340], [-122.666840, 45.518280], [-122.666840, 45.518280], [-122.666980, 45.517890], [-122.667120, 45.517460], [-122.667450, 45.516180], [-122.667740, 45.514910], [-122.667850, 45.514450], [-122.667940, 45.514060], [-122.667990, 45.513750], [-122.668010, 45.513630], [-122.668020, 45.513480], [-122.668020, 45.513300], [-122.668000, 45.512970], [-122.667990, 45.512900], [-122.667960, 45.512730], [-122.667890, 45.512400], [-122.667860, 45.512280], [-122.667810, 45.512160], [-122.667750, 45.512040], [-122.667630, 45.511860], [-122.667520, 45.511710], [-122.667160, 45.511310], [-122.666950, 45.511030], [-122.666860, 45.510890], [-122.666790, 45.510730], [-122.666730, 45.510560], [-122.666690, 45.510370], [-122.666690, 45.510130], [-122.666720, 45.509930], [-122.666770, 45.509790], [-122.666860, 45.509610], [-122.666990, 45.509410], [-122.667130, 45.509240], [-122.667230, 45.509140], [-122.667410, 45.508990], [-122.667660, 45.508830], [-122.670800, 45.506930], [-122.670920, 45.506880], [-122.671150, 45.506770], [-122.671730, 45.506470], [-122.672360, 45.506220], [-122.672720, 45.506050], [-122.672920, 45.505950], [-122.673170, 45.505800], [-122.673410, 45.505610], [-122.673670, 45.505390], [-122.673850, 45.505220], [-122.674020, 45.505010], [-122.674160, 45.504810], [-122.674260, 45.504640], [-122.674360, 45.504450], [-122.674450, 45.504230], [-122.674520, 45.503980], [-122.674560, 45.503710], [-122.674570, 45.503550], [-122.674580, 45.503350], [-122.674570, 45.503060], [-122.674550, 45.502880], [-122.674490, 45.502540], [-122.674410, 45.502200], [-122.674230, 45.501650], [-122.674170, 45.501450], [-122.673940, 45.500930], [-122.673810, 45.500590], [-122.673720, 45.500310], [-122.673640, 45.499960], [-122.673590, 45.499550], [-122.673580, 45.499330], [-122.673560, 45.499120], [-122.673540, 45.498380], [-122.673540, 45.497800], [-122.673490, 45.497640], [-122.673490, 45.497510], [-122.673580, 45.495140], [-122.673580, 45.495140], [-122.673580, 45.494840], [-122.673600, 45.494430], [-122.673620, 45.493970], [-122.673660, 45.493620], [-122.673710, 45.493350], [-122.673710, 45.493340], [-122.673840, 45.492790], [-122.673840, 45.492770], [-122.673930, 45.492480], [-122.673990, 45.492310], [-122.674190, 45.491840], [-122.674430, 45.491390], [-122.674480, 45.491280], [-122.674630, 45.491050], [-122.674780, 45.490830], [-122.674970, 45.490600], [-122.675200, 45.490300], [-122.675500, 45.489980], [-122.675720, 45.489750], [-122.676100, 45.489410], [-122.676190, 45.489340], [-122.676360, 45.489200], [-122.676860, 45.488790], [-122.677690, 45.488200], [-122.678170, 45.487810], [-122.678480, 45.487530], [-122.678760, 45.487210], [-122.678920, 45.486980], [-122.679040, 45.486790], [-122.679130, 45.486590], [-122.679190, 45.486480], [-122.679240, 45.486340], [-122.679290, 45.486120], [-122.679320, 45.485830], [-122.679330, 45.485510], [-122.679320, 45.485310], [-122.679300, 45.485090], [-122.679260, 45.484700], [-122.679120, 45.483720], [-122.679020, 45.483070], [-122.678980, 45.482510], [-122.678950, 45.482270], [-122.678940, 45.482050], [-122.678930, 45.481630], [-122.678930, 45.480760], [-122.678930, 45.480330], [-122.678920, 45.480140], [-122.678950, 45.479360], [-122.678980, 45.478710], [-122.678920, 45.477550], [-122.678910, 45.477250], [-122.678880, 45.476660], [-122.678850, 45.476480], [-122.678830, 45.476340], [-122.678790, 45.476140], [-122.678710, 45.475810], [-122.678550, 45.475230], [-122.678290, 45.474470], [-122.677980, 45.473660], [-122.677660, 45.472840], [-122.677530, 45.472460], [-122.677450, 45.472140], [-122.677430, 45.471900], [-122.677450, 45.471600], [-122.677580, 45.471220], [-122.677700, 45.471010], [-122.677860, 45.470750], [-122.678110, 45.470510], [-122.678360, 45.470320], [-122.678360, 45.470320], [-122.678640, 45.470150], [-122.678710, 45.470110], [-122.678910, 45.470010], [-122.679090, 45.469930], [-122.679400, 45.469830], [-122.679750, 45.469740], [-122.680010, 45.469710], [-122.680260, 45.469690], [-122.680540, 45.469680], [-122.680820, 45.469690], [-122.681170, 45.469720], [-122.681520, 45.469770], [-122.681880, 45.469820], [-122.683380, 45.470100], [-122.683530, 45.470120], [-122.683750, 45.470160], [-122.684330, 45.470250], [-122.684630, 45.470290], [-122.684970, 45.470330], [-122.685390, 45.470370], [-122.685650, 45.470380], [-122.685660, 45.470380], [-122.686000, 45.470400], [-122.686070, 45.470400], [-122.686550, 45.470400], [-122.686990, 45.470380], [-122.687470, 45.470350], [-122.687940, 45.470300], [-122.687960, 45.470300], [-122.688190, 45.470260], [-122.688470, 45.470220], [-122.688740, 45.470160], [-122.688980, 45.470100], [-122.689250, 45.470020], [-122.689510, 45.469920], [-122.689730, 45.469810], [-122.689940, 45.469690], [-122.690180, 45.469540], [-122.690360, 45.469400], [-122.690620, 45.469160], [-122.691010, 45.468750], [-122.691400, 45.468330], [-122.691610, 45.468120], [-122.691880, 45.467860], [-122.692080, 45.467690], [-122.692300, 45.467520], [-122.692790, 45.467170], [-122.693260, 45.466870], [-122.693740, 45.466560], [-122.694040, 45.466370], [-122.694370, 45.466160], [-122.694930, 45.465820], [-122.695510, 45.465480], [-122.695950, 45.465260], [-122.695970, 45.465250], [-122.696150, 45.465160], [-122.696180, 45.465140], [-122.697150, 45.464640], [-122.697230, 45.464610], [-122.697350, 45.464540], [-122.697440, 45.464500], [-122.698190, 45.464110], [-122.698860, 45.463770], [-122.699130, 45.463620], [-122.699290, 45.463530], [-122.699330, 45.463510], [-122.699490, 45.463420], [-122.699770, 45.463270], [-122.699880, 45.463210], [-122.700060, 45.463100], [-122.700670, 45.462730], [-122.701750, 45.462140], [-122.702360, 45.461790], [-122.703870, 45.460920], [-122.704360, 45.460630], [-122.704650, 45.460470], [-122.705380, 45.460040], [-122.705850, 45.459770], [-122.707470, 45.458830], [-122.708330, 45.458350], [-122.709260, 45.457850], [-122.710180, 45.457330], [-122.711950, 45.456360], [-122.712570, 45.456020], [-122.714780, 45.454810], [-122.715400, 45.454470], [-122.715800, 45.454280], [-122.716040, 45.454170], [-122.716240, 45.454090], [-122.716670, 45.453920], [-122.716910, 45.453850], [-122.717190, 45.453770], [-122.717380, 45.453720], [-122.717600, 45.453680], [-122.717740, 45.453650], [-122.718600, 45.453550], [-122.718760, 45.453540], [-122.719120, 45.453540], [-122.719610, 45.453550], [-122.720120, 45.453580], [-122.720820, 45.453610], [-122.720890, 45.453620], [-122.721220, 45.453640], [-122.721340, 45.453650], [-122.721530, 45.453650], [-122.721530, 45.453650], [-122.721810, 45.453670], [-122.722070, 45.453680], [-122.722360, 45.453680], [-122.722670, 45.453680], [-122.723030, 45.453670], [-122.723390, 45.453640], [-122.723660, 45.453620], [-122.723920, 45.453590], [-122.724400, 45.453500], [-122.724540, 45.453470], [-122.724920, 45.453380], [-122.725120, 45.453330], [-122.725560, 45.453190], [-122.726060, 45.453010], [-122.726340, 45.452890], [-122.726500, 45.452800], [-122.726720, 45.452680], [-122.727020, 45.452480], [-122.727300, 45.452300], [-122.727440, 45.452200], [-122.727750, 45.451930], [-122.727950, 45.451750], [-122.728100, 45.451590], [-122.728170, 45.451500], [-122.728420, 45.451210], [-122.728630, 45.450900], [-122.728820, 45.450620], [-122.729210, 45.449990], [-122.729610, 45.449340], [-122.729980, 45.448730], [-122.730110, 45.448530], [-122.730300, 45.448250], [-122.730450, 45.448040], [-122.730680, 45.447770], [-122.730810, 45.447620], [-122.731040, 45.447400], [-122.731210, 45.447250], [-122.731330, 45.447150], [-122.731580, 45.446930], [-122.731880, 45.446720], [-122.732060, 45.446600], [-122.732270, 45.446480], [-122.732450, 45.446380], [-122.732710, 45.446240], [-122.732990, 45.446110], [-122.733330, 45.445970], [-122.733700, 45.445840], [-122.733960, 45.445750], [-122.734320, 45.445650], [-122.734680, 45.445560], [-122.735050, 45.445480], [-122.735660, 45.445370], [-122.736750, 45.445150], [-122.737060, 45.445090], [-122.737440, 45.444990], [-122.737710, 45.444910], [-122.738010, 45.444810], [-122.738280, 45.444710], [-122.738550, 45.444590], [-122.738740, 45.444500], [-122.738940, 45.444390], [-122.739170, 45.444260], [-122.739380, 45.444120], [-122.739560, 45.443990], [-122.739740, 45.443860], [-122.739930, 45.443700], [-122.740030, 45.443600], [-122.740130, 45.443510], [-122.740270, 45.443360], [-122.740330, 45.443290], [-122.740540, 45.443060], [-122.740630, 45.442960], [-122.740760, 45.442800], [-122.740960, 45.442570], [-122.741270, 45.442210], [-122.741580, 45.441860], [-122.741680, 45.441730], [-122.742160, 45.441180], [-122.742390, 45.440910], [-122.742670, 45.440600], [-122.742770, 45.440470], [-122.742890, 45.440320], [-122.743060, 45.440090], [-122.743310, 45.439720], [-122.743480, 45.439440], [-122.743580, 45.439250], [-122.743690, 45.439050], [-122.743810, 45.438810], [-122.743910, 45.438580], [-122.744010, 45.438350], [-122.744090, 45.438150], [-122.744170, 45.437920], [-122.744250, 45.437540], [-122.744250, 45.437530], [-122.744300, 45.437160], [-122.744330, 45.436870], [-122.744340, 45.436540], [-122.744350, 45.436230], [-122.744340, 45.435540], [-122.744330, 45.434600], [-122.744330, 45.433740], [-122.744320, 45.432960], [-122.744310, 45.432620], [-122.744310, 45.432620], [-122.744300, 45.430850], [-122.744300, 45.430430], [-122.744280, 45.428900], [-122.744260, 45.426990], [-122.744260, 45.426350], [-122.744260, 45.426050], [-122.744200, 45.421810], [-122.744200, 45.421180], [-122.744200, 45.421110], [-122.744200, 45.420930], [-122.744200, 45.420710], [-122.744190, 45.420600], [-122.744190, 45.420420], [-122.744190, 45.419860], [-122.744200, 45.418860], [-122.744190, 45.417870], [-122.744180, 45.416900], [-122.744160, 45.416020], [-122.744220, 45.415710], [-122.744220, 45.415370], [-122.744210, 45.415200], [-122.744210, 45.415190], [-122.744200, 45.414510], [-122.744190, 45.413330], [-122.744190, 45.413170], [-122.744190, 45.412680], [-122.744160, 45.410830], [-122.744150, 45.410580], [-122.744150, 45.410510], [-122.744140, 45.410010], [-122.744140, 45.409230], [-122.744140, 45.408660], [-122.744140, 45.408100], [-122.744140, 45.408040], [-122.744140, 45.407910], [-122.744130, 45.407730], [-122.744130, 45.407620], [-122.744170, 45.407020], [-122.744230, 45.406490], [-122.744230, 45.406490], [-122.744240, 45.406380], [-122.744290, 45.406000], [-122.744340, 45.405650], [-122.744430, 45.405070], [-122.744710, 45.403620], [-122.744770, 45.403360], [-122.744850, 45.403040], [-122.744850, 45.403040], [-122.745050, 45.402320], [-122.745260, 45.401620], [-122.745620, 45.400620], [-122.745850, 45.400060], [-122.746170, 45.399270], [-122.746900, 45.397360], [-122.747160, 45.396710], [-122.747440, 45.396010], [-122.747780, 45.395160], [-122.747780, 45.395160], [-122.747930, 45.394790], [-122.748800, 45.392700], [-122.749030, 45.392130], [-122.749480, 45.391000], [-122.750070, 45.389490], [-122.750380, 45.388720], [-122.750460, 45.388510], [-122.750530, 45.388330], [-122.750670, 45.387960], [-122.750970, 45.387150], [-122.751090, 45.386850], [-122.751400, 45.386050], [-122.751500, 45.385780], [-122.752000, 45.384500], [-122.752660, 45.382800], [-122.752770, 45.382500], [-122.752960, 45.382020], [-122.753160, 45.381510], [-122.753160, 45.381500], [-122.753300, 45.381170], [-122.753460, 45.380770], [-122.753840, 45.379830], [-122.753930, 45.379660], [-122.754360, 45.378620], [-122.754770, 45.377610], [-122.755220, 45.376410], [-122.755470, 45.375790], [-122.755580, 45.375510], [-122.755650, 45.375340], [-122.755780, 45.375030], [-122.756520, 45.373160], [-122.757180, 45.371480], [-122.757630, 45.370370], [-122.757780, 45.370000], [-122.758080, 45.369240], [-122.758320, 45.368650], [-122.758350, 45.368570], [-122.758440, 45.368340], [-122.758790, 45.367480], [-122.759280, 45.366250], [-122.759790, 45.365010], [-122.760000, 45.364470], [-122.760170, 45.364070], [-122.760340, 45.363630], [-122.760340, 45.363630], [-122.760480, 45.363260], [-122.760780, 45.362520], [-122.761370, 45.361130], [-122.761730, 45.360200], [-122.762040, 45.359460], [-122.762080, 45.359360], [-122.762340, 45.358710], [-122.762470, 45.358390], [-122.763100, 45.356840], [-122.764220, 45.353970], [-122.764290, 45.353810], [-122.764360, 45.353630], [-122.766050, 45.349410], [-122.766650, 45.347900], [-122.767260, 45.346390], [-122.767790, 45.345060], [-122.768030, 45.344470], [-122.768300, 45.343720], [-122.768510, 45.343050], [-122.768640, 45.342620], [-122.768770, 45.342170], [-122.769040, 45.341080], [-122.769200, 45.340380], [-122.769280, 45.339780], [-122.769340, 45.339310], [-122.769380, 45.338980], [-122.769450, 45.338460], [-122.769480, 45.337900], [-122.769520, 45.337350], [-122.769530, 45.336950], [-122.769530, 45.336950], [-122.769530, 45.336800], [-122.769550, 45.336220], [-122.769560, 45.336040], [-122.769570, 45.335660], [-122.769560, 45.333790], [-122.769560, 45.333600], [-122.769550, 45.333100], [-122.769560, 45.330880], [-122.769580, 45.330450], [-122.769550, 45.329800], [-122.769550, 45.329180], [-122.769550, 45.327480], [-122.769540, 45.324070], [-122.769540, 45.322330], [-122.769540, 45.320750], [-122.769530, 45.319150], [-122.769530, 45.317560], [-122.769530, 45.317390], [-122.769530, 45.317380], [-122.769530, 45.312690], [-122.769510, 45.310230], [-122.769560, 45.306150], [-122.769500, 45.303200], [-122.769500, 45.302650], [-122.769500, 45.301620], [-122.769500, 45.300640], [-122.769500, 45.299500], [-122.769500, 45.299180], [-122.769500, 45.297210], [-122.769490, 45.296360], [-122.769490, 45.295180], [-122.769490, 45.294830], [-122.769490, 45.294050], [-122.769500, 45.293340], [-122.769500, 45.291840]],
   
  "route-4-nb": [[-122.759300, 45.365120], [-122.758650, 45.366080], [-122.758430, 45.366400], [-122.758180, 45.366710], [-122.757960, 45.366950], [-122.757730, 45.367170], [-122.757510, 45.367360], [-122.757260, 45.367560], [-122.756970, 45.367770], [-122.756600, 45.367990], [-122.756250, 45.368190], [-122.755920, 45.368350], [-122.755630, 45.368480], [-122.755340, 45.368590], [-122.754920, 45.368740], [-122.754580, 45.368860], [-122.754150, 45.369000], [-122.753640, 45.369150], [-122.753080, 45.369300], [-122.748940, 45.370420], [-122.746840, 45.370990], [-122.744880, 45.371520], [-122.744040, 45.371750], [-122.743800, 45.371810], [-122.742420, 45.372190], [-122.741620, 45.372390], [-122.741030, 45.372530], [-122.740530, 45.372640], [-122.740010, 45.372740], [-122.739620, 45.372810], [-122.739570, 45.372820], [-122.739050, 45.372910], [-122.738640, 45.372970], [-122.738170, 45.373030], [-122.737480, 45.373110], [-122.737020, 45.373160], [-122.736570, 45.373190], [-122.736040, 45.373230], [-122.735610, 45.373250], [-122.735030, 45.373270], [-122.734240, 45.373280], [-122.733550, 45.373270], [-122.732840, 45.373250], [-122.731840, 45.373210], [-122.730640, 45.373170], [-122.729560, 45.373140], [-122.728700, 45.373140], [-122.728210, 45.373140], [-122.726930, 45.373150], [-122.725510, 45.373150], [-122.724810, 45.373140], [-122.724060, 45.373120], [-122.723170, 45.373090], [-122.722400, 45.373050], [-122.721740, 45.373010], [-122.721260, 45.372970], [-122.720820, 45.372940], [-122.720120, 45.372880], [-122.719600, 45.372830], [-122.719120, 45.372780], [-122.718610, 45.372720], [-122.717950, 45.372640], [-122.717320, 45.372550], [-122.716570, 45.372440], [-122.715530, 45.372280], [-122.714570, 45.372110], [-122.713910, 45.371980], [-122.713630, 45.371930], [-122.712890, 45.371770], [-122.712320, 45.371650], [-122.710550, 45.371220], [-122.709030, 45.370800], [-122.707410, 45.370310], [-122.706280, 45.369970], [-122.706040, 45.369890], [-122.705100, 45.369610], [-122.703730, 45.369230], [-122.701790, 45.368740], [-122.701790, 45.368740], [-122.701520, 45.368660], [-122.700210, 45.368350], [-122.698860, 45.368050], [-122.697870, 45.367840], [-122.695880, 45.367440], [-122.694250, 45.367130], [-122.693950, 45.367080], [-122.693840, 45.367060], [-122.692790, 45.366880], [-122.692000, 45.366750], [-122.691520, 45.366680], [-122.690550, 45.366550], [-122.689550, 45.366450], [-122.689050, 45.366410], [-122.687840, 45.366340], [-122.686910, 45.366300], [-122.685960, 45.366280], [-122.685460, 45.366270], [-122.684750, 45.366240], [-122.684250, 45.366210], [-122.683680, 45.366160], [-122.683600, 45.366160], [-122.683340, 45.366140], [-122.683180, 45.366130], [-122.682760, 45.366080], [-122.682270, 45.366020], [-122.681780, 45.365950], [-122.681290, 45.365880], [-122.680810, 45.365800], [-122.680330, 45.365710], [-122.679850, 45.365610], [-122.679370, 45.365510], [-122.678900, 45.365400], [-122.678430, 45.365280], [-122.677970, 45.365150], [-122.677500, 45.365010], [-122.677040, 45.364870], [-122.676590, 45.364730], [-122.676150, 45.364570], [-122.675700, 45.364410], [-122.675260, 45.364240], [-122.674830, 45.364060], [-122.674400, 45.363880], [-122.673560, 45.363490], [-122.673150, 45.363280], [-122.672750, 45.363070], [-122.672350, 45.362860], [-122.671970, 45.362640], [-122.671590, 45.362420], [-122.671220, 45.362180], [-122.671010, 45.362040], [-122.670860, 45.361940], [-122.670500, 45.361700], [-122.670150, 45.361440], [-122.669800, 45.361190], [-122.669470, 45.360920], [-122.669090, 45.360600], [-122.668450, 45.360050], [-122.668110, 45.359730], [-122.667610, 45.359260], [-122.667170, 45.358810], [-122.666190, 45.357780], [-122.665730, 45.357260], [-122.665430, 45.356930], [-122.665150, 45.356580], [-122.664630, 45.355920], [-122.663430, 45.354330], [-122.663050, 45.353820], [-122.662580, 45.353220], [-122.662370, 45.352960], [-122.662100, 45.352640], [-122.661820, 45.352330], [-122.661650, 45.352160], [-122.661440, 45.351940], [-122.661020, 45.351540], [-122.660790, 45.351330], [-122.660320, 45.350940], [-122.659810, 45.350560], [-122.659080, 45.350040], [-122.658570, 45.349730], [-122.658010, 45.349400], [-122.657310, 45.349020], [-122.656690, 45.348720], [-122.656230, 45.348520], [-122.655770, 45.348330], [-122.655470, 45.348210], [-122.655040, 45.348050], [-122.654310, 45.347810], [-122.654090, 45.347750], [-122.653750, 45.347660], [-122.653470, 45.347600], [-122.652980, 45.347490], [-122.652600, 45.347440], [-122.652200, 45.347390], [-122.652120, 45.347380], [-122.651940, 45.347370], [-122.651760, 45.347350], [-122.651580, 45.347340], [-122.651500, 45.347340], [-122.651480, 45.347330], [-122.651110, 45.347320], [-122.650690, 45.347320], [-122.650240, 45.347330], [-122.649920, 45.347350], [-122.649550, 45.347380], [-122.649190, 45.347430], [-122.648790, 45.347490], [-122.648420, 45.347550], [-122.647990, 45.347630], [-122.646790, 45.347860], [-122.646190, 45.347980], [-122.645380, 45.348140], [-122.644850, 45.348230], [-122.644490, 45.348290], [-122.644010, 45.348360], [-122.643490, 45.348440], [-122.642990, 45.348500], [-122.642580, 45.348540], [-122.642060, 45.348590], [-122.641500, 45.348630], [-122.640900, 45.348670], [-122.639910, 45.348720], [-122.638970, 45.348780], [-122.637740, 45.348860], [-122.636830, 45.348930], [-122.636020, 45.349010], [-122.635280, 45.349100], [-122.634690, 45.349180], [-122.634060, 45.349290], [-122.633390, 45.349420], [-122.632960, 45.349510], [-122.632430, 45.349640], [-122.631720, 45.349820], [-122.631130, 45.350000], [-122.630640, 45.350150], [-122.630160, 45.350320], [-122.629590, 45.350530], [-122.629170, 45.350700], [-122.628750, 45.350870], [-122.628340, 45.351050], [-122.627930, 45.351240], [-122.627390, 45.351520], [-122.626740, 45.351860], [-122.626130, 45.352210], [-122.625390, 45.352650], [-122.625170, 45.352780], [-122.625170, 45.352780], [-122.622680, 45.354300], [-122.621910, 45.354780], [-122.620350, 45.355730], [-122.619550, 45.356220], [-122.619080, 45.356510], [-122.618720, 45.356740], [-122.618150, 45.357090], [-122.617700, 45.357390], [-122.617580, 45.357470], [-122.617400, 45.357590], [-122.617260, 45.357690], [-122.616530, 45.358220], [-122.615980, 45.358670], [-122.615480, 45.359090], [-122.615010, 45.359510], [-122.614520, 45.359940], [-122.613570, 45.360770], [-122.613110, 45.361130], [-122.612830, 45.361320], [-122.612650, 45.361450], [-122.612620, 45.361480], [-122.612290, 45.361690], [-122.612050, 45.361840], [-122.612020, 45.361850], [-122.611820, 45.361970], [-122.611730, 45.362010], [-122.611540, 45.362110], [-122.611430, 45.362170], [-122.611160, 45.362290], [-122.610690, 45.362490], [-122.610310, 45.362630], [-122.610120, 45.362700], [-122.609450, 45.362920], [-122.608930, 45.363070], [-122.608290, 45.363260], [-122.607480, 45.363490], [-122.605980, 45.363900], [-122.604120, 45.364420], [-122.601810, 45.365070], [-122.601390, 45.365180], [-122.600200, 45.365520], [-122.600160, 45.365530], [-122.599140, 45.365820], [-122.598550, 45.366000], [-122.598010, 45.366170], [-122.597970, 45.366180], [-122.597590, 45.366320], [-122.597320, 45.366430], [-122.597140, 45.366500], [-122.596680, 45.366720], [-122.596560, 45.366780], [-122.596270, 45.366920], [-122.596070, 45.367030], [-122.595800, 45.367200], [-122.595570, 45.367360], [-122.595260, 45.367590], [-122.594900, 45.367880], [-122.594670, 45.368090], [-122.594270, 45.368500], [-122.593940, 45.368860], [-122.593450, 45.369410], [-122.593050, 45.369880], [-122.592570, 45.370420], [-122.592160, 45.370880], [-122.591770, 45.371290], [-122.591420, 45.371620], [-122.591170, 45.371860], [-122.590720, 45.372250], [-122.590530, 45.372390], [-122.589770, 45.372960], [-122.589190, 45.373390], [-122.587560, 45.374530], [-122.587240, 45.374760], [-122.587060, 45.374890], [-122.586970, 45.374950], [-122.585840, 45.375760], [-122.585790, 45.375790], [-122.584110, 45.376980], [-122.583100, 45.377700], [-122.582640, 45.378040], [-122.582280, 45.378340], [-122.582010, 45.378580], [-122.581740, 45.378850], [-122.581450, 45.379170], [-122.581140, 45.379540], [-122.580930, 45.379850], [-122.580690, 45.380220], [-122.580510, 45.380550], [-122.580400, 45.380760], [-122.580280, 45.381010], [-122.580100, 45.381480], [-122.579030, 45.384350], [-122.578920, 45.384630], [-122.578860, 45.384810], [-122.578570, 45.385570], [-122.578330, 45.386220], [-122.577760, 45.387710], [-122.577000, 45.389750], [-122.575610, 45.393450], [-122.574890, 45.395330], [-122.574630, 45.396010], [-122.574420, 45.396520], [-122.574170, 45.397120], [-122.573940, 45.397680], [-122.573870, 45.397850], [-122.573870, 45.397870], [-122.573410, 45.398970], [-122.572990, 45.399990], [-122.572680, 45.400730], [-122.572340, 45.401560], [-122.571950, 45.402520], [-122.571630, 45.403310], [-122.571460, 45.403820], [-122.571400, 45.404000], [-122.571250, 45.404650], [-122.571160, 45.405160], [-122.571120, 45.405560], [-122.571110, 45.405960], [-122.571120, 45.406330], [-122.571140, 45.406780], [-122.571200, 45.407220], [-122.571220, 45.407320], [-122.571270, 45.407610], [-122.571340, 45.407910], [-122.571410, 45.408170], [-122.571510, 45.408510], [-122.571720, 45.409110], [-122.571770, 45.409250], [-122.572390, 45.411020], [-122.572600, 45.411610], [-122.573120, 45.413090], [-122.573440, 45.414000], [-122.573730, 45.414810], [-122.573950, 45.415470], [-122.574050, 45.415890], [-122.574090, 45.416070], [-122.574130, 45.416260], [-122.574160, 45.416510], [-122.574180, 45.416760], [-122.574180, 45.417070], [-122.574150, 45.417350], [-122.574130, 45.417510], [-122.574130, 45.417520], [-122.574090, 45.417690], [-122.574070, 45.417770], [-122.574010, 45.418020], [-122.573970, 45.418150], [-122.573860, 45.418430], [-122.573820, 45.418510], [-122.573740, 45.418660], [-122.573740, 45.418680], [-122.573660, 45.418820], [-122.573560, 45.418990], [-122.573470, 45.419130], [-122.573320, 45.419350], [-122.573060, 45.419690], [-122.572760, 45.420060], [-122.572720, 45.420100], [-122.572590, 45.420260], [-122.572140, 45.420790], [-122.571240, 45.421860], [-122.570590, 45.422610], [-122.569600, 45.423800], [-122.568610, 45.424950], [-122.567470, 45.426300], [-122.566940, 45.426950], [-122.566680, 45.427290], [-122.566420, 45.427640], [-122.566300, 45.427850], [-122.566120, 45.428180], [-122.565920, 45.428600], [-122.565750, 45.429030], [-122.565680, 45.429260], [-122.565560, 45.429670], [-122.565480, 45.430060], [-122.565440, 45.430410], [-122.565420, 45.430610], [-122.565410, 45.430890], [-122.565420, 45.431230], [-122.565450, 45.431660], [-122.565530, 45.432100], [-122.565590, 45.432380], [-122.565770, 45.432970], [-122.565830, 45.433150], [-122.566130, 45.434020], [-122.566330, 45.434580], [-122.566930, 45.436320], [-122.567240, 45.437200], [-122.567430, 45.437750], [-122.567580, 45.438170], [-122.567610, 45.438270], [-122.567870, 45.439030], [-122.568140, 45.439780], [-122.568360, 45.440490], [-122.568570, 45.441020], [-122.568930, 45.442070], [-122.569370, 45.443330], [-122.569510, 45.443730], [-122.569710, 45.444310], [-122.569950, 45.444990], [-122.570170, 45.445610], [-122.570390, 45.446270], [-122.570570, 45.446780], [-122.570800, 45.447430], [-122.570940, 45.447840], [-122.571240, 45.448710], [-122.571540, 45.449560], [-122.571840, 45.450410], [-122.572020, 45.450930], [-122.572120, 45.451210], [-122.572140, 45.451290], [-122.572200, 45.451470], [-122.572320, 45.451880], [-122.572480, 45.452450], [-122.572570, 45.452880], [-122.572650, 45.453310], [-122.572730, 45.453840], [-122.572760, 45.454240], [-122.572780, 45.454680], [-122.572780, 45.454730], [-122.572790, 45.455010], [-122.572770, 45.455620], [-122.572730, 45.456200], [-122.572680, 45.456580], [-122.572670, 45.456630], [-122.572630, 45.456900], [-122.572600, 45.457070], [-122.572490, 45.457620], [-122.572450, 45.457780], [-122.572350, 45.458150], [-122.572220, 45.458590], [-122.572100, 45.458900], [-122.571960, 45.459280], [-122.571790, 45.459710], [-122.571560, 45.460190], [-122.571350, 45.460590], [-122.571260, 45.460760], [-122.571070, 45.461100], [-122.570870, 45.461420], [-122.570610, 45.461810], [-122.570360, 45.462190], [-122.570090, 45.462550], [-122.569850, 45.462850], [-122.569600, 45.463130], [-122.569060, 45.463700], [-122.568170, 45.464620], [-122.567560, 45.465250], [-122.567280, 45.465560], [-122.566970, 45.465910], [-122.566710, 45.466240], [-122.566440, 45.466630], [-122.566230, 45.466950], [-122.566040, 45.467280], [-122.565890, 45.467590], [-122.565680, 45.468050], [-122.565520, 45.468510], [-122.565390, 45.468960], [-122.565300, 45.469360], [-122.565240, 45.469770], [-122.565210, 45.470140], [-122.565190, 45.470470], [-122.565200, 45.471050], [-122.565220, 45.471660], [-122.565240, 45.472530], [-122.565280, 45.473270], [-122.565350, 45.474000], [-122.565570, 45.477960], [-122.565640, 45.479240], [-122.565720, 45.480880], [-122.565720, 45.480880], [-122.565770, 45.482100], [-122.565770, 45.482190], [-122.565760, 45.482300], [-122.565790, 45.482530], [-122.565790, 45.482530], [-122.565810, 45.482940], [-122.565810, 45.482950], [-122.565880, 45.483680], [-122.565950, 45.485340], [-122.565970, 45.486270], [-122.565970, 45.487170], [-122.565940, 45.488060], [-122.565870, 45.488940], [-122.565800, 45.489780], [-122.565790, 45.489880], [-122.565780, 45.490060], [-122.565760, 45.490200], [-122.565710, 45.490690], [-122.565590, 45.491720], [-122.565520, 45.492350], [-122.565330, 45.494030], [-122.565330, 45.494190], [-122.565260, 45.495600], [-122.565250, 45.496300], [-122.565260, 45.497000], [-122.565260, 45.497060], [-122.565240, 45.497650], [-122.565240, 45.497650], [-122.565210, 45.500380], [-122.565210, 45.500380], [-122.565210, 45.500380], [-122.565190, 45.502020], [-122.565180, 45.502950], [-122.565170, 45.503070], [-122.565170, 45.503120], [-122.565160, 45.504140], [-122.565140, 45.504710], [-122.565140, 45.504710], [-122.565140, 45.505280], [-122.565140, 45.505850], [-122.565150, 45.506310], [-122.565180, 45.506760], [-122.565190, 45.507000], [-122.565220, 45.507550], [-122.565240, 45.507970], [-122.565260, 45.508200], [-122.565330, 45.509260], [-122.565370, 45.509850], [-122.565380, 45.510200], [-122.565380, 45.510500], [-122.565390, 45.511490], [-122.565330, 45.513100], [-122.565260, 45.514790], [-122.565280, 45.515050], [-122.565280, 45.515330], [-122.565270, 45.516120], [-122.565260, 45.516830], [-122.565240, 45.517850], [-122.565220, 45.519370], [-122.565210, 45.520550], [-122.565180, 45.522480], [-122.565180, 45.522590], [-122.565180, 45.522650], [-122.565180, 45.522770], [-122.565180, 45.522830], [-122.565180, 45.524260], [-122.565180, 45.524270], [-122.565160, 45.525250], [-122.565140, 45.526150], [-122.565140, 45.526230], [-122.565140, 45.526290], [-122.565140, 45.526410], [-122.565140, 45.526470], [-122.565150, 45.527400], [-122.565130, 45.528050], [-122.565110, 45.528500], [-122.565060, 45.529130], [-122.565020, 45.529660], [-122.565010, 45.529770], [-122.564970, 45.530120], [-122.564920, 45.530540], [-122.564860, 45.530980], [-122.564810, 45.531280], [-122.564780, 45.531490], [-122.564760, 45.531620], [-122.564660, 45.532210], [-122.564660, 45.532220], [-122.564610, 45.532470], [-122.564610, 45.532470], [-122.564530, 45.532820], [-122.564300, 45.533840], [-122.564300, 45.533850], [-122.564270, 45.533960], [-122.564270, 45.533970], [-122.564200, 45.534210], [-122.564200, 45.534230], [-122.564180, 45.534310], [-122.564060, 45.534780], [-122.563830, 45.535650], [-122.563600, 45.536570], [-122.563400, 45.537320], [-122.563180, 45.538060], [-122.563000, 45.538660], [-122.562810, 45.539280], [-122.562600, 45.539910], [-122.562380, 45.540560], [-122.562190, 45.541060], [-122.561870, 45.541910], [-122.561600, 45.542590], [-122.561540, 45.542770], [-122.561540, 45.542770], [-122.561310, 45.543380], [-122.560940, 45.544210], [-122.560710, 45.544760], [-122.560560, 45.545110], [-122.560460, 45.545370], [-122.560380, 45.545590], [-122.560310, 45.545810], [-122.560250, 45.546020], [-122.560180, 45.546240], [-122.560150, 45.546470], [-122.560100, 45.546730], [-122.560100, 45.546850], [-122.560100, 45.546850], [-122.560090, 45.546980], [-122.560120, 45.547490], [-122.560130, 45.547510], [-122.560120, 45.547640], [-122.560130, 45.547660], [-122.560170, 45.547850], [-122.560240, 45.548090], [-122.560340, 45.548380], [-122.560480, 45.548690], [-122.560620, 45.548930], [-122.560730, 45.549120], [-122.560940, 45.549400], [-122.560950, 45.549410], [-122.560950, 45.549410], [-122.561100, 45.549590], [-122.561480, 45.549980], [-122.561570, 45.550070], [-122.561620, 45.550110], [-122.561750, 45.550240], [-122.561850, 45.550310], [-122.562170, 45.550560], [-122.562780, 45.550990], [-122.564000, 45.551810], [-122.564430, 45.552120], [-122.564770, 45.552360], [-122.565240, 45.552760], [-122.565510, 45.553010], [-122.565800, 45.553350], [-122.566040, 45.553650], [-122.566180, 45.553870], [-122.566320, 45.554120], [-122.566420, 45.554320], [-122.566520, 45.554550], [-122.566590, 45.554740], [-122.566660, 45.554970], [-122.566680, 45.555080], [-122.566730, 45.555290], [-122.566730, 45.555310], [-122.566760, 45.555490], [-122.566760, 45.555520], [-122.566780, 45.555750], [-122.566780, 45.555960], [-122.566770, 45.556150], [-122.566750, 45.556360], [-122.566710, 45.556620], [-122.566670, 45.556810], [-122.566630, 45.556920], [-122.566600, 45.557030], [-122.566530, 45.557220], [-122.566510, 45.557250], [-122.566500, 45.557290], [-122.566440, 45.557420], [-122.566420, 45.557460], [-122.566370, 45.557580], [-122.566230, 45.557840], [-122.566080, 45.558090], [-122.565920, 45.558300], [-122.565740, 45.558520], [-122.565590, 45.558690], [-122.565350, 45.558920], [-122.565150, 45.559110], [-122.565110, 45.559150], [-122.564760, 45.559470], [-122.564150, 45.559940], [-122.563370, 45.560510], [-122.561660, 45.561790], [-122.560580, 45.562600], [-122.560580, 45.562600], [-122.559830, 45.563170], [-122.558560, 45.564130], [-122.555900, 45.566130], [-122.555900, 45.566140], [-122.555550, 45.566430], [-122.554780, 45.567010], [-122.554700, 45.567070], [-122.554540, 45.567180], [-122.552260, 45.568910], [-122.551870, 45.569210], [-122.551160, 45.569740], [-122.550480, 45.570260], [-122.549920, 45.570700], [-122.549320, 45.571160], [-122.549310, 45.571170], [-122.549250, 45.571220], [-122.549050, 45.571390], [-122.548850, 45.571560], [-122.548660, 45.571730], [-122.548470, 45.571900], [-122.548280, 45.572070], [-122.548090, 45.572240], [-122.547910, 45.572420], [-122.547730, 45.572600], [-122.547550, 45.572780], [-122.547370, 45.572960], [-122.547370, 45.572960], [-122.547370, 45.572960], [-122.547200, 45.573140], [-122.547050, 45.573300], [-122.546870, 45.573510], [-122.546710, 45.573690], [-122.546590, 45.573840], [-122.546440, 45.574020], [-122.546330, 45.574160], [-122.546110, 45.574480], [-122.545790, 45.574950], [-122.545520, 45.575360], [-122.545380, 45.575580], [-122.545260, 45.575770], [-122.545110, 45.576050], [-122.544990, 45.576280], [-122.544870, 45.576490], [-122.544780, 45.576690], [-122.544680, 45.576890], [-122.544580, 45.577110], [-122.544500, 45.577310], [-122.544400, 45.577530], [-122.544320, 45.577730], [-122.544260, 45.577900], [-122.544190, 45.578090], [-122.544130, 45.578290], [-122.544060, 45.578500], [-122.544000, 45.578700], [-122.543940, 45.578930], [-122.543880, 45.579160], [-122.543830, 45.579370], [-122.543780, 45.579590], [-122.543750, 45.579810], [-122.543710, 45.580030], [-122.543670, 45.580240], [-122.543640, 45.580460], [-122.543620, 45.580680], [-122.543600, 45.580910], [-122.543580, 45.581130], [-122.543570, 45.581430], [-122.543560, 45.581670], [-122.543560, 45.581790], [-122.543560, 45.582000], [-122.543570, 45.582260], [-122.543580, 45.582450], [-122.543590, 45.582740], [-122.543620, 45.582960], [-122.543650, 45.583200], [-122.543680, 45.583450], [-122.543720, 45.583710], [-122.543770, 45.583990], [-122.543820, 45.584210], [-122.543870, 45.584420], [-122.543930, 45.584650], [-122.543980, 45.584860], [-122.544050, 45.585080], [-122.544110, 45.585300], [-122.544180, 45.585510], [-122.544260, 45.585740], [-122.544340, 45.585940], [-122.544420, 45.586140], [-122.544510, 45.586350], [-122.544600, 45.586560], [-122.544690, 45.586770], [-122.544790, 45.586970], [-122.544900, 45.587180], [-122.545000, 45.587390], [-122.545120, 45.587590], [-122.545240, 45.587810], [-122.545360, 45.588020], [-122.545480, 45.588220], [-122.545590, 45.588420], [-122.545720, 45.588630], [-122.545850, 45.588840], [-122.547360, 45.591280], [-122.547640, 45.591740], [-122.547760, 45.591950], [-122.547950, 45.592260], [-122.548120, 45.592560], [-122.548280, 45.592870], [-122.548450, 45.593180], [-122.548610, 45.593500], [-122.548760, 45.593800], [-122.548910, 45.594120], [-122.549030, 45.594360], [-122.549060, 45.594430], [-122.549210, 45.594750], [-122.549340, 45.595070], [-122.549460, 45.595370], [-122.549590, 45.595700], [-122.549720, 45.596010], [-122.549830, 45.596320], [-122.549940, 45.596660], [-122.550040, 45.596960], [-122.550130, 45.597240]],

  "route-4-sb": [[-122.550380, 45.597270], [-122.550360, 45.597200], [-122.550260, 45.596890], [-122.550120, 45.596480], [-122.550050, 45.596240], [-122.549820, 45.595630], [-122.549580, 45.595020], [-122.549300, 45.594400], [-122.549300, 45.594390], [-122.548990, 45.593740], [-122.548670, 45.593100], [-122.548320, 45.592470], [-122.547970, 45.591850], [-122.547590, 45.591240], [-122.546840, 45.590040], [-122.546590, 45.589620], [-122.546250, 45.589090], [-122.546050, 45.588760], [-122.545890, 45.588480], [-122.545770, 45.588280], [-122.545650, 45.588100], [-122.545540, 45.587900], [-122.545420, 45.587690], [-122.545290, 45.587460], [-122.545180, 45.587280], [-122.545070, 45.587070], [-122.544960, 45.586880], [-122.544870, 45.586700], [-122.544770, 45.586480], [-122.544690, 45.586290], [-122.544590, 45.586050], [-122.544510, 45.585850], [-122.544430, 45.585630], [-122.544350, 45.585410], [-122.544280, 45.585180], [-122.544220, 45.584990], [-122.544180, 45.584840], [-122.544140, 45.584690], [-122.544100, 45.584550], [-122.544060, 45.584380], [-122.544020, 45.584200], [-122.543970, 45.583970], [-122.543930, 45.583720], [-122.543890, 45.583520], [-122.543860, 45.583290], [-122.543830, 45.583090], [-122.543810, 45.582840], [-122.543790, 45.582630], [-122.543780, 45.582430], [-122.543770, 45.582210], [-122.543760, 45.581990], [-122.543760, 45.581780], [-122.543770, 45.581530], [-122.543770, 45.581360], [-122.543780, 45.581170], [-122.543800, 45.580890], [-122.543820, 45.580660], [-122.543840, 45.580440], [-122.543880, 45.580210], [-122.543910, 45.580000], [-122.543950, 45.579770], [-122.543990, 45.579560], [-122.544040, 45.579360], [-122.544090, 45.579140], [-122.544140, 45.578940], [-122.544200, 45.578730], [-122.544260, 45.578510], [-122.544330, 45.578300], [-122.544400, 45.578080], [-122.544480, 45.577860], [-122.544560, 45.577660], [-122.544640, 45.577460], [-122.544740, 45.577230], [-122.544830, 45.577030], [-122.544920, 45.576820], [-122.545040, 45.576590], [-122.545100, 45.576470], [-122.545130, 45.576400], [-122.545240, 45.576210], [-122.545350, 45.576000], [-122.545460, 45.575810], [-122.545580, 45.575610], [-122.545720, 45.575380], [-122.545830, 45.575210], [-122.545990, 45.574980], [-122.546340, 45.574530], [-122.546490, 45.574320], [-122.546760, 45.573980], [-122.546910, 45.573800], [-122.547060, 45.573640], [-122.547240, 45.573460], [-122.547440, 45.573240], [-122.547620, 45.573060], [-122.547800, 45.572880], [-122.547980, 45.572700], [-122.548160, 45.572520], [-122.548360, 45.572350], [-122.548550, 45.572180], [-122.548750, 45.572000], [-122.548840, 45.571930], [-122.548840, 45.571930], [-122.548910, 45.571870], [-122.548950, 45.571840], [-122.549150, 45.571670], [-122.549360, 45.571500], [-122.549550, 45.571360], [-122.549590, 45.571330], [-122.549780, 45.571190], [-122.550170, 45.570890], [-122.551110, 45.570200], [-122.551170, 45.570150], [-122.552450, 45.569200], [-122.552990, 45.568800], [-122.552990, 45.568790], [-122.553840, 45.568170], [-122.554700, 45.567530], [-122.555150, 45.567190], [-122.555170, 45.567170], [-122.556150, 45.566430], [-122.556160, 45.566430], [-122.558410, 45.564730], [-122.559580, 45.563840], [-122.560000, 45.563520], [-122.560210, 45.563360], [-122.560420, 45.563200], [-122.560550, 45.563110], [-122.560640, 45.563040], [-122.560850, 45.562890], [-122.561070, 45.562730], [-122.561290, 45.562570], [-122.561510, 45.562420], [-122.561730, 45.562260], [-122.561930, 45.562130], [-122.562180, 45.561960], [-122.562410, 45.561810], [-122.562630, 45.561660], [-122.562850, 45.561500], [-122.563070, 45.561350], [-122.563290, 45.561190], [-122.563510, 45.561040], [-122.563820, 45.560810], [-122.564150, 45.560560], [-122.564780, 45.560090], [-122.565000, 45.559930], [-122.565200, 45.559760], [-122.565410, 45.559590], [-122.565610, 45.559430], [-122.565800, 45.559260], [-122.565890, 45.559180], [-122.565890, 45.559170], [-122.565980, 45.559080], [-122.566160, 45.558900], [-122.566320, 45.558710], [-122.566480, 45.558520], [-122.566620, 45.558330], [-122.566750, 45.558130], [-122.566870, 45.557930], [-122.566980, 45.557730], [-122.567070, 45.557530], [-122.567160, 45.557310], [-122.567240, 45.557100], [-122.567300, 45.556880], [-122.567340, 45.556670], [-122.567370, 45.556450], [-122.567390, 45.556220], [-122.567390, 45.556010], [-122.567380, 45.555790], [-122.567350, 45.555570], [-122.567300, 45.555330], [-122.567250, 45.555140], [-122.567180, 45.554920], [-122.567110, 45.554700], [-122.567020, 45.554500], [-122.566930, 45.554280], [-122.566820, 45.554080], [-122.566700, 45.553870], [-122.566570, 45.553670], [-122.566440, 45.553480], [-122.566290, 45.553290], [-122.566130, 45.553100], [-122.565950, 45.552910], [-122.565760, 45.552740], [-122.565610, 45.552590], [-122.565400, 45.552400], [-122.565180, 45.552230], [-122.564980, 45.552080], [-122.564760, 45.551920], [-122.564080, 45.551430], [-122.563890, 45.551290], [-122.563560, 45.551070], [-122.563390, 45.550960], [-122.563150, 45.550790], [-122.562870, 45.550600], [-122.562640, 45.550440], [-122.562420, 45.550270], [-122.562210, 45.550110], [-122.562070, 45.549990], [-122.562000, 45.549930], [-122.561830, 45.549770], [-122.561650, 45.549590], [-122.561480, 45.549400], [-122.561340, 45.549230], [-122.561200, 45.549040], [-122.561110, 45.548890], [-122.560960, 45.548630], [-122.560870, 45.548470], [-122.560790, 45.548270], [-122.560720, 45.548090], [-122.560660, 45.547860], [-122.560600, 45.547620], [-122.560560, 45.547340], [-122.560540, 45.547130], [-122.560540, 45.546950], [-122.560550, 45.546750], [-122.560570, 45.546540], [-122.560620, 45.546300], [-122.560670, 45.546090], [-122.560750, 45.545840], [-122.560810, 45.545660], [-122.560900, 45.545460], [-122.561000, 45.545220], [-122.561360, 45.544430], [-122.561510, 45.544110], [-122.561660, 45.543770], [-122.561780, 45.543480], [-122.561890, 45.543220], [-122.562040, 45.542860], [-122.562160, 45.542570], [-122.562270, 45.542270], [-122.562410, 45.541890], [-122.562500, 45.541620], [-122.562690, 45.541110], [-122.562790, 45.540820], [-122.563140, 45.539670], [-122.563230, 45.539370], [-122.563320, 45.539020], [-122.563400, 45.538700], [-122.563650, 45.537750], [-122.563890, 45.536790], [-122.564080, 45.536020], [-122.564220, 45.535530], [-122.564370, 45.534990], [-122.564410, 45.534790], [-122.564410, 45.534770], [-122.564520, 45.534350], [-122.564530, 45.534320], [-122.564550, 45.534250], [-122.564600, 45.534050], [-122.564620, 45.534000], [-122.564620, 45.533990], [-122.564700, 45.533650], [-122.564770, 45.533370], [-122.564780, 45.533350], [-122.564950, 45.532530], [-122.564960, 45.532410], [-122.564970, 45.532310], [-122.565080, 45.531630], [-122.565090, 45.531590], [-122.565110, 45.531450], [-122.565210, 45.530750], [-122.565290, 45.530030], [-122.565340, 45.529570], [-122.565390, 45.529050], [-122.565400, 45.528940], [-122.565400, 45.528940], [-122.565400, 45.528940], [-122.565410, 45.528700], [-122.565440, 45.528240], [-122.565460, 45.527730], [-122.565460, 45.527710], [-122.565480, 45.527510], [-122.565480, 45.526980], [-122.565510, 45.525670], [-122.565540, 45.524070], [-122.565550, 45.522560], [-122.565580, 45.521170], [-122.565590, 45.520110], [-122.565590, 45.519130], [-122.565590, 45.519090], [-122.565590, 45.518950], [-122.565590, 45.518900], [-122.565600, 45.518430], [-122.565600, 45.518360], [-122.565600, 45.518250], [-122.565600, 45.518220], [-122.565600, 45.518170], [-122.565610, 45.517670], [-122.565640, 45.516560], [-122.565640, 45.516430], [-122.565660, 45.515230], [-122.565660, 45.515210], [-122.565670, 45.515020], [-122.565680, 45.514310], [-122.565680, 45.514290], [-122.565680, 45.514180], [-122.565680, 45.514180], [-122.565670, 45.513780], [-122.565670, 45.512900], [-122.565680, 45.511350], [-122.565670, 45.510940], [-122.565670, 45.510860], [-122.565660, 45.510680], [-122.565660, 45.510570], [-122.565660, 45.509940], [-122.565650, 45.509790], [-122.565650, 45.509790], [-122.565610, 45.509170], [-122.565500, 45.507910], [-122.565480, 45.507530], [-122.565460, 45.507090], [-122.565440, 45.506710], [-122.565430, 45.506260], [-122.565430, 45.505710], [-122.565450, 45.504760], [-122.565450, 45.504710], [-122.565460, 45.504150], [-122.565460, 45.504080], [-122.565470, 45.503120], [-122.565480, 45.502120], [-122.565500, 45.501040], [-122.565500, 45.501040], [-122.565540, 45.499300], [-122.565540, 45.499170], [-122.565530, 45.498330], [-122.565540, 45.497660], [-122.565540, 45.497650], [-122.565560, 45.497070], [-122.565560, 45.497020], [-122.565590, 45.495380], [-122.565590, 45.495380], [-122.565600, 45.494980], [-122.565640, 45.494250], [-122.565700, 45.493560], [-122.565710, 45.493530], [-122.565750, 45.493370], [-122.565780, 45.493010], [-122.565820, 45.492460], [-122.565990, 45.490780], [-122.566060, 45.490070], [-122.566080, 45.489890], [-122.566180, 45.488920], [-122.566230, 45.488360], [-122.566270, 45.487830], [-122.566300, 45.486850], [-122.566290, 45.485710], [-122.566260, 45.484850], [-122.566200, 45.484160], [-122.566150, 45.482950], [-122.566140, 45.482910], [-122.566140, 45.482790], [-122.566120, 45.482540], [-122.566050, 45.481330], [-122.565980, 45.479310], [-122.565940, 45.478110], [-122.565930, 45.477370], [-122.565890, 45.476520], [-122.565880, 45.476380], [-122.565880, 45.476370], [-122.565780, 45.474370], [-122.565750, 45.472990], [-122.565700, 45.472250], [-122.565630, 45.471660], [-122.565600, 45.471130], [-122.565590, 45.470820], [-122.565590, 45.470550], [-122.565610, 45.470210], [-122.565630, 45.469950], [-122.565650, 45.469710], [-122.565700, 45.469420], [-122.565790, 45.468950], [-122.565920, 45.468510], [-122.566090, 45.468080], [-122.566340, 45.467530], [-122.566580, 45.467090], [-122.566830, 45.466710], [-122.567050, 45.466400], [-122.567380, 45.465990], [-122.567760, 45.465550], [-122.568190, 45.465110], [-122.569090, 45.464170], [-122.569290, 45.463950], [-122.569700, 45.463520], [-122.570140, 45.463010], [-122.570510, 45.462540], [-122.570840, 45.462100], [-122.571130, 45.461680], [-122.571390, 45.461290], [-122.571800, 45.460580], [-122.572170, 45.459860], [-122.572320, 45.459530], [-122.572450, 45.459200], [-122.572610, 45.458800], [-122.572730, 45.458460], [-122.572850, 45.458040], [-122.572990, 45.457540], [-122.573070, 45.457200], [-122.573110, 45.456970], [-122.573120, 45.456910], [-122.573180, 45.456590], [-122.573200, 45.456420], [-122.573240, 45.456070], [-122.573280, 45.455610], [-122.573300, 45.455170], [-122.573300, 45.454880], [-122.573300, 45.454740], [-122.573300, 45.454740], [-122.573300, 45.454650], [-122.573280, 45.454250], [-122.573260, 45.453900], [-122.573210, 45.453450], [-122.573150, 45.453060], [-122.573070, 45.452680], [-122.573000, 45.452320], [-122.572820, 45.451650], [-122.572760, 45.451470], [-122.572710, 45.451300], [-122.572700, 45.451270], [-122.572520, 45.450740], [-122.572330, 45.450210], [-122.572150, 45.449690], [-122.571930, 45.449060], [-122.571740, 45.448520], [-122.571560, 45.448000], [-122.571220, 45.447020], [-122.570930, 45.446190], [-122.570730, 45.445640], [-122.570240, 45.444200], [-122.569940, 45.443350], [-122.569740, 45.442750], [-122.569520, 45.442140], [-122.569310, 45.441530], [-122.569150, 45.441090], [-122.568970, 45.440540], [-122.568780, 45.440020], [-122.568480, 45.439140], [-122.568310, 45.438650], [-122.568230, 45.438420], [-122.568170, 45.438240], [-122.568150, 45.438180], [-122.568010, 45.437790], [-122.567670, 45.436740], [-122.567590, 45.436570], [-122.567590, 45.436550], [-122.567440, 45.436110], [-122.567210, 45.435510], [-122.566960, 45.434780], [-122.566530, 45.433540], [-122.566480, 45.433380], [-122.566380, 45.433110], [-122.566270, 45.432800], [-122.566160, 45.432440], [-122.566090, 45.432140], [-122.566030, 45.431860], [-122.565980, 45.431550], [-122.565960, 45.431340], [-122.565950, 45.431150], [-122.565940, 45.431060], [-122.565940, 45.430780], [-122.565960, 45.430380], [-122.566010, 45.430000], [-122.566070, 45.429650], [-122.566100, 45.429560], [-122.566110, 45.429490], [-122.566140, 45.429380], [-122.566180, 45.429270], [-122.566230, 45.429110], [-122.566400, 45.428650], [-122.566580, 45.428240], [-122.566620, 45.428160], [-122.566810, 45.427830], [-122.567130, 45.427340], [-122.567510, 45.426850], [-122.568190, 45.426050], [-122.568410, 45.425790], [-122.568950, 45.425140], [-122.569890, 45.424030], [-122.570790, 45.422960], [-122.571460, 45.422170], [-122.571910, 45.421630], [-122.572440, 45.421000], [-122.572800, 45.420570], [-122.572930, 45.420420], [-122.573180, 45.420120], [-122.573310, 45.419960], [-122.573510, 45.419700], [-122.573820, 45.419270], [-122.573980, 45.418970], [-122.574060, 45.418800], [-122.574140, 45.418630], [-122.574150, 45.418600], [-122.574240, 45.418360], [-122.574320, 45.418110], [-122.574340, 45.418000], [-122.574380, 45.417820], [-122.574390, 45.417760], [-122.574430, 45.417480], [-122.574440, 45.417110], [-122.574440, 45.417010], [-122.574420, 45.416870], [-122.574390, 45.416480], [-122.574320, 45.416150], [-122.574240, 45.415850], [-122.574150, 45.415520], [-122.574030, 45.415180], [-122.573830, 45.414600], [-122.573640, 45.414070], [-122.573460, 45.413540], [-122.573200, 45.412810], [-122.572980, 45.412180], [-122.572690, 45.411380], [-122.572560, 45.411000], [-122.572250, 45.410150], [-122.572080, 45.409650], [-122.571910, 45.409190], [-122.571760, 45.408710], [-122.571600, 45.408220], [-122.571490, 45.407810], [-122.571450, 45.407620], [-122.571390, 45.407320], [-122.571380, 45.407260], [-122.571330, 45.406940], [-122.571310, 45.406680], [-122.571290, 45.406360], [-122.571280, 45.406010], [-122.571300, 45.405580], [-122.571340, 45.405190], [-122.571400, 45.404770], [-122.571460, 45.404450], [-122.571550, 45.404110], [-122.571640, 45.403820], [-122.571640, 45.403810], [-122.571800, 45.403330], [-122.572020, 45.402780], [-122.572240, 45.402230], [-122.572490, 45.401630], [-122.572950, 45.400520], [-122.573470, 45.399270], [-122.573880, 45.398260], [-122.574020, 45.397930], [-122.574090, 45.397750], [-122.574220, 45.397450], [-122.574620, 45.396470], [-122.575290, 45.394860], [-122.575950, 45.393240], [-122.576620, 45.391540], [-122.577260, 45.389830], [-122.578300, 45.387080], [-122.579110, 45.384910], [-122.579160, 45.384770], [-122.579230, 45.384590], [-122.579430, 45.384050], [-122.579670, 45.383410], [-122.579810, 45.383040], [-122.579870, 45.382900], [-122.580010, 45.382540], [-122.580110, 45.382250], [-122.580220, 45.381990], [-122.580390, 45.381520], [-122.580550, 45.381140], [-122.580610, 45.380990], [-122.580750, 45.380680], [-122.580900, 45.380380], [-122.581190, 45.379900], [-122.581470, 45.379510], [-122.581780, 45.379120], [-122.582030, 45.378840], [-122.582320, 45.378550], [-122.582500, 45.378380], [-122.582700, 45.378210], [-122.583030, 45.377940], [-122.583490, 45.377590], [-122.583970, 45.377240], [-122.584500, 45.376870], [-122.584980, 45.376530], [-122.585790, 45.375950], [-122.586250, 45.375640], [-122.588150, 45.374300], [-122.588750, 45.373880], [-122.589300, 45.373470], [-122.589300, 45.373470], [-122.589310, 45.373460], [-122.590080, 45.372910], [-122.590470, 45.372610], [-122.590730, 45.372400], [-122.591220, 45.372000], [-122.591470, 45.371770], [-122.591760, 45.371490], [-122.591940, 45.371310], [-122.592130, 45.371110], [-122.592350, 45.370870], [-122.592550, 45.370660], [-122.593030, 45.370120], [-122.593580, 45.369470], [-122.594070, 45.368910], [-122.594470, 45.368490], [-122.594770, 45.368200], [-122.594920, 45.368060], [-122.595010, 45.367980], [-122.595130, 45.367860], [-122.595430, 45.367630], [-122.595710, 45.367420], [-122.595780, 45.367370], [-122.595990, 45.367220], [-122.596130, 45.367140], [-122.596270, 45.367060], [-122.596660, 45.366850], [-122.597120, 45.366630], [-122.597450, 45.366490], [-122.597690, 45.366410], [-122.598050, 45.366270], [-122.598400, 45.366160], [-122.598820, 45.366030], [-122.599380, 45.365870], [-122.599490, 45.365840], [-122.600210, 45.365630], [-122.600960, 45.365430], [-122.603070, 45.364850], [-122.605990, 45.364030], [-122.606390, 45.363910], [-122.608180, 45.363410], [-122.609090, 45.363150], [-122.609570, 45.363000], [-122.610190, 45.362800], [-122.610590, 45.362650], [-122.611010, 45.362480], [-122.611310, 45.362350], [-122.611600, 45.362220], [-122.611910, 45.362060], [-122.612110, 45.361950], [-122.612140, 45.361930], [-122.612280, 45.361850], [-122.612600, 45.361630], [-122.612610, 45.361630], [-122.612620, 45.361620], [-122.612740, 45.361540], [-122.612930, 45.361420], [-122.612970, 45.361380], [-122.613370, 45.361090], [-122.613680, 45.360840], [-122.613910, 45.360640], [-122.614370, 45.360260], [-122.614760, 45.359920], [-122.615500, 45.359260], [-122.615910, 45.358900], [-122.616260, 45.358600], [-122.616570, 45.358360], [-122.616840, 45.358160], [-122.617180, 45.357910], [-122.617490, 45.357700], [-122.617660, 45.357590], [-122.617850, 45.357470], [-122.618000, 45.357380], [-122.618320, 45.357180], [-122.619320, 45.356600], [-122.620110, 45.356130], [-122.621060, 45.355580], [-122.621670, 45.355230], [-122.622300, 45.354860], [-122.622880, 45.354530], [-122.623460, 45.354200], [-122.624000, 45.353880], [-122.625010, 45.353290], [-122.625590, 45.352950], [-122.626340, 45.352520], [-122.627140, 45.352060], [-122.627800, 45.351700], [-122.628420, 45.351380], [-122.628770, 45.351210], [-122.629140, 45.351040], [-122.629620, 45.350840], [-122.630140, 45.350630], [-122.630520, 45.350490], [-122.630900, 45.350360], [-122.631340, 45.350220], [-122.631800, 45.350080], [-122.632300, 45.349940], [-122.632910, 45.349790], [-122.633430, 45.349670], [-122.633920, 45.349570], [-122.634250, 45.349510], [-122.634700, 45.349430], [-122.635240, 45.349360], [-122.635950, 45.349270], [-122.636730, 45.349190], [-122.637480, 45.349140], [-122.638200, 45.349100], [-122.639360, 45.349040], [-122.640550, 45.348970], [-122.641500, 45.348910], [-122.642220, 45.348850], [-122.642810, 45.348790], [-122.643330, 45.348730], [-122.643850, 45.348660], [-122.644380, 45.348580], [-122.644900, 45.348500], [-122.646010, 45.348290], [-122.646970, 45.348100], [-122.647690, 45.347960], [-122.648330, 45.347840], [-122.648950, 45.347750], [-122.649470, 45.347690], [-122.649900, 45.347660], [-122.650220, 45.347650], [-122.650560, 45.347640], [-122.651100, 45.347650], [-122.651470, 45.347670], [-122.651490, 45.347680], [-122.651570, 45.347680], [-122.651750, 45.347700], [-122.651930, 45.347720], [-122.652120, 45.347740], [-122.652200, 45.347750], [-122.652590, 45.347810], [-122.653060, 45.347900], [-122.653420, 45.347970], [-122.653770, 45.348060], [-122.654170, 45.348180], [-122.654460, 45.348280], [-122.654610, 45.348330], [-122.655020, 45.348480], [-122.655390, 45.348620], [-122.655750, 45.348770], [-122.656220, 45.348980], [-122.656820, 45.349270], [-122.657330, 45.349530], [-122.657950, 45.349880], [-122.658540, 45.350240], [-122.659010, 45.350560], [-122.659300, 45.350760], [-122.659830, 45.351160], [-122.660100, 45.351380], [-122.660380, 45.351610], [-122.660800, 45.352000], [-122.661340, 45.352540], [-122.661670, 45.352890], [-122.661990, 45.353270], [-122.662260, 45.353610], [-122.662560, 45.354000], [-122.663100, 45.354710], [-122.663640, 45.355430], [-122.664440, 45.356470], [-122.664910, 45.357040], [-122.665160, 45.357340], [-122.665410, 45.357630], [-122.665680, 45.357940], [-122.666240, 45.358540], [-122.666840, 45.359150], [-122.667280, 45.359590], [-122.667730, 45.360010], [-122.667990, 45.360250], [-122.668610, 45.360810], [-122.668810, 45.360980], [-122.669270, 45.361370], [-122.669730, 45.361750], [-122.670210, 45.362130], [-122.670720, 45.362510], [-122.670860, 45.362620], [-122.671050, 45.362760], [-122.671390, 45.363000], [-122.671740, 45.363230], [-122.672100, 45.363460], [-122.672470, 45.363680], [-122.672850, 45.363890], [-122.673230, 45.364100], [-122.673770, 45.364370], [-122.674420, 45.364660], [-122.675090, 45.364950], [-122.675430, 45.365080], [-122.676030, 45.365290], [-122.676560, 45.365470], [-122.676920, 45.365580], [-122.677370, 45.365710], [-122.678290, 45.365930], [-122.678750, 45.366030], [-122.679220, 45.366130], [-122.679690, 45.366210], [-122.680450, 45.366330], [-122.680830, 45.366380], [-122.681300, 45.366430], [-122.681790, 45.366480], [-122.682750, 45.366570], [-122.683640, 45.366630], [-122.683750, 45.366640], [-122.684000, 45.366660], [-122.684600, 45.366690], [-122.685290, 45.366720], [-122.686620, 45.366770], [-122.687550, 45.366810], [-122.688460, 45.366870], [-122.689250, 45.366930], [-122.689980, 45.367000], [-122.690900, 45.367110], [-122.691560, 45.367210], [-122.692090, 45.367290], [-122.692600, 45.367370], [-122.693140, 45.367460], [-122.693870, 45.367600], [-122.694310, 45.367680], [-122.694730, 45.367750], [-122.696010, 45.368000], [-122.696890, 45.368180], [-122.697850, 45.368380], [-122.699220, 45.368690], [-122.699680, 45.368790], [-122.700800, 45.369060], [-122.701430, 45.369220], [-122.702540, 45.369500], [-122.703980, 45.369880], [-122.705270, 45.370240], [-122.705670, 45.370350], [-122.705910, 45.370420], [-122.706640, 45.370630], [-122.707090, 45.370760], [-122.708410, 45.371140], [-122.708520, 45.371170], [-122.708520, 45.371170], [-122.709290, 45.371390], [-122.710170, 45.371620], [-122.710690, 45.371760], [-122.712150, 45.372100], [-122.712880, 45.372260], [-122.713380, 45.372360], [-122.713870, 45.372450], [-122.714270, 45.372530], [-122.714770, 45.372620], [-122.715210, 45.372700], [-122.715980, 45.372820], [-122.716660, 45.372920], [-122.717170, 45.372990], [-122.717740, 45.373070], [-122.718300, 45.373130], [-122.719020, 45.373210], [-122.719640, 45.373280], [-122.720160, 45.373320], [-122.720920, 45.373380], [-122.721610, 45.373430], [-122.722400, 45.373480], [-122.723410, 45.373520], [-122.724100, 45.373540], [-122.724760, 45.373550], [-122.725770, 45.373560], [-122.726830, 45.373550], [-122.727990, 45.373530], [-122.728780, 45.373530], [-122.729740, 45.373540], [-122.730660, 45.373570], [-122.731470, 45.373610], [-122.732450, 45.373660], [-122.733200, 45.373680], [-122.733970, 45.373690], [-122.734620, 45.373690], [-122.735290, 45.373670], [-122.736130, 45.373640], [-122.736590, 45.373600], [-122.737120, 45.373560], [-122.737690, 45.373490], [-122.738320, 45.373410], [-122.739060, 45.373300], [-122.739670, 45.373200], [-122.740470, 45.373040], [-122.741010, 45.372930], [-122.741890, 45.372710], [-122.742660, 45.372510], [-122.743800, 45.372200], [-122.744020, 45.372140], [-122.744040, 45.372130], [-122.747080, 45.371300], [-122.747750, 45.371120], [-122.748410, 45.370950], [-122.750060, 45.370550], [-122.751550, 45.370200], [-122.751950, 45.370110], [-122.753760, 45.369710], [-122.755000, 45.369430], [-122.756000, 45.369210], [-122.756600, 45.369070], [-122.756900, 45.369000], [-122.757230, 45.368910], [-122.757610, 45.368790], [-122.757990, 45.368660], [-122.758260, 45.368550], [-122.758490, 45.368440], [-122.758670, 45.368350], [-122.758870, 45.368230], [-122.759160, 45.368040], [-122.759380, 45.367890], [-122.759590, 45.367720], [-122.759800, 45.367520], [-122.760020, 45.367290], [-122.760170, 45.367110], [-122.760320, 45.366910], [-122.760450, 45.366700], [-122.760570, 45.366470], [-122.760680, 45.366210], [-122.760730, 45.366040], [-122.760790, 45.365830], [-122.760830, 45.365590], [-122.760860, 45.365370], [-122.760870, 45.365090], [-122.760860, 45.364810], [-122.760840, 45.364440], [-122.760820, 45.363860], [-122.760830, 45.363440], [-122.760870, 45.363130], [-122.760900, 45.362980], [-122.761350, 45.361220]],


}

const metrics = ["Travel Time"];

const haversineDistance = ([lon1, lat1], [lon2, lat2]) => {
  const toRad = (value) => (value * Math.PI) / 180;
  const R = 3958.8;
  const dLat = toRad(lat2 - lat1);
  const dLon = toRad(lon2 - lon1);
  const a =
    Math.sin(dLat / 2) ** 2 +
    Math.cos(toRad(lat1)) * Math.cos(toRad(lat2)) * Math.sin(dLon / 2) ** 2;
  return R * 2 * Math.asin(Math.sqrt(a));
};

const routeDescriptions = {
  "route-1": {
    start: "Columbia River Bridge (Start of I-5 in Clark County)",
    end: "Clark County Line (North end of I-5 in Clark County)",
  },
  "route-2": {
    start: "Columbia River (Start of I-205 in Clark County)",
    end: "Junction with I-5 (North end of I-205 in Clark County)",
  },
  "route-3": {
    start: "Columbia River (Start of I-205 in Clark County)",
    end: "Junction with I-5 (North end of I-205 in Clark County)",
  },
  "route-4": {
    start: "Columbia River (Start of I-205 in Clark County)",
    end: "Junction with I-5 (North end of I-205 in Clark County)",
  },
};

const MapComponent = () => {
  const mapContainer = useRef(null);
  const chartRef = useRef(null);
  const map = useRef(null);

  const [selectedRoute, setSelectedRoute] = useState("route-1");
  const [direction, setDirection] = useState("nb");

  const yMetric = "Travel Time";

  const [chartData, setChartData] = useState([]);
  const [routeMiles, setRouteMiles] = useState(0);

  const [startMarker, setStartMarker] = useState(null);
  const [endMarker, setEndMarker] = useState(null);

  const [mapReady, setMapReady] = useState(false);


  const fetchAndUpdateData = async () => {
    const route = routes.find(r => r.id === selectedRoute);
    if (route && map.current && map.current.isStyleLoaded()) {
      const bounds = new mapboxgl.LngLatBounds();
      route[direction].forEach(coord => bounds.extend(coord));
      map.current.fitBounds(bounds, { padding: 100 });
    }

    const csv = await d3Fetch.csv("/data/2020&2045_InterstateTravelTimes_RTC.csv", d => {
      return {
        Highway: d["Highway"].trim(),
        County: d["County"].trim(),
        Direction: d["Direction"].trim(),
        // @ts-ignore
        StartTime: parseInt(d["Start Time"].split(":"[0])),
        Year: +d["Year"],
        Miles: +d["Miles"],
        "Travel Time": +d["Travel Time"],
        // Speed: +d["Speed"],
        // "Total Volume": + parseFloat(d["Total Volume"].replace(",", "")),
        // "Truck Volume": +d["Truck Volume"],
        // "Truck %": parseFloat(d["Truck %"].replace("%", ""))
      }
    });

    const filtered = csv.filter(d =>
      // @ts-ignore
      d.Highway === route.highway &&
      // @ts-ignore
      d.County === route.county &&
      d.Direction === direction.toUpperCase()
    );

    const grouped = d3.groups(filtered, d => d.StartTime);

    const data = grouped.map(([hour, entries]) => {
      const byYear = Object.fromEntries(
        entries.map(e => [e.Year, e[yMetric]])
      );
      return {
        hour,
        ...byYear
      };
    }).sort((a, b) => a.hour - b.hour);
    // @ts-ignore
    setChartData(data);
    // @ts-ignore
    if (filtered.length > 0) setRouteMiles(filtered[0].Miles.toFixed(2));

    // Remove old markers if any
    if (startMarker) startMarker.remove();
    if (endMarker) endMarker.remove();

    const coords = route[direction];
    const desc = routeDescriptions[selectedRoute];

    const newStartPopup = new mapboxgl.Popup({ offset: {top: [0, 0], bottom: [0, -25]}, closeButton: false}).setText(desc?.start || "Start");
    const newEndPopup = new mapboxgl.Popup({ offset: {top: [0, 0], bottom: [0, -25]}, closeButton: false}).setText(desc?.end || "End");

    const newStart = new mapboxgl.Marker({ color: "blue" })
      .setLngLat(coords[0])
      .addTo(map.current);

    const newEnd = new mapboxgl.Marker({ color: "red" })
      .setLngLat(coords[coords.length - 1])
      .addTo(map.current);

    // Show popup on hover for Start Marker
    newStart.getElement().addEventListener("mouseenter", () => newStartPopup.addTo(map.current).setLngLat(coords[0]));
    newStart.getElement().addEventListener("mouseleave", () => newStartPopup.remove());

    // Show popup on hover for End Marker
    newEnd.getElement().addEventListener("mouseenter", () => newEndPopup.addTo(map.current).setLngLat(coords[coords.length - 1]));
    newEnd.getElement().addEventListener("mouseleave", () => newEndPopup.remove());

    setStartMarker(newStart);
    setEndMarker(newEnd);

  };

  useEffect(() => {
    if (mapReady){
      fetchAndUpdateData();
    }
  }, [selectedRoute, direction, mapReady]);

    useEffect(() => {
    if (map.current) return;
    // @ts-ignore
    map.current = new mapboxgl.Map({
      // @ts-ignore
      container: mapContainer.current,
      style: "mapbox://styles/mapbox/streets-v11",
      center: [-122.6750, 45.5231],
      zoom: 9,
    });

    // @ts-ignore
    map.current.on("load", () => {
      routes.forEach(async (route) => {
        for (const dir of ["nb", "sb"]) {
          const coords = route[dir];
          const [start, end] = coords;

          //  Fetching coordinates from mapbox API
          //const url = `https://api.mapbox.com/directions/v5/mapbox/driving/${start[0]},${start[1]};${end[0]},${end[1]}?geometries=geojson&access_token=${mapboxgl.accessToken}`;
          //const res = await fetch(url);
          //const data = await res.json();
          //const geometry = data.routes[0].geometry;
          //console.log(
          //  `// ${route.label} ${dir.toUpperCase()} route\nconst ${route.id}_${dir}_route = ${JSON.stringify(geometry.coordinates)};\n`
          //);

          const sourceId = `${route.id}-${dir}`;

          const routeCoords = HARDCODED_ROUTES[`${route.id}-${dir}`];

          // @ts-ignore
          map.current.addSource(sourceId, {
            type: "geojson",
            data: {
              type: "Feature",
              geometry: {
                type: "LineString",
                coordinates: routeCoords,
              },
            },
          });

          // @ts-ignore
          map.current.addLayer({
            id: sourceId,
            type: "line",
            source: sourceId,
            layout: { visibility: "none" },
            paint: {
              "line-color": "blue",
              "line-width": 5,
            },
          }, "road-label");

          if (route.id === selectedRoute && dir === direction) {
            // @ts-ignore
            map.current.setLayoutProperty(sourceId, "visibility", "visible");

            const bounds = new mapboxgl.LngLatBounds();
            HARDCODED_ROUTES[`${route.id}-${dir}`].forEach(coord => bounds.extend(coord));
            map.current.fitBounds(bounds, { padding: 100 });
          }
        }
      });

      setMapReady(true)
    });
  }, []);

  useEffect(() => {
    if (!map.current) return;

    routes.forEach((route) => {
      ["nb", "sb"].forEach((dir) => {
        const layerId = `${route.id}-${dir}`;
        const isVisible = selectedRoute === route.id && direction === dir;
        // @ts-ignore
        if (map.current.getLayer(layerId)) {
          // @ts-ignore
          map.current.setLayoutProperty(
            layerId,
            "visibility",
            isVisible ? "visible" : "none"
          );
        }
      });
    });
  }, [selectedRoute, direction]);

  useEffect(() => {
    if (!chartRef.current) return;

    const renderChart = () => {
      d3.select(chartRef.current).selectAll("*").remove();

      const margin = { top: 10, right: 30, bottom: 130, left: 60 };
      const containerWidth = chartRef.current.clientWidth;
      const containerHeight = chartRef.current.clientHeight;
      const width = containerWidth - margin.left - margin.right;
      const height = containerHeight - margin.top - margin.bottom;

      const svg = d3
        .select(chartRef.current)
        .append("svg")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom)
        .append("g")
        .attr("transform", `translate(${margin.left},${margin.top})`);

      const x = d3.scaleLinear().domain([0, 23]).range([0, width]);
      const yMax = d3.max(chartData.flatMap(d => [d["2020"], d["2045"]]));
      // @ts-ignore
      const y = d3.scaleLinear().domain([0, yMax ? yMax * 1.1 : 60]).range([height, 0]);


      svg.append("g")
        .attr("transform", `translate(0,${height})`)
        .call(d3.axisBottom(x).ticks(12).tickFormat((d) => {
          const hour = +d;
          const ampm = hour >= 12 ? "PM" : "AM";
          const displayHour = hour % 12 === 0 ? 12 : hour % 12;
          return `${displayHour} ${ampm}`;
        }));

      svg.append("text")
        .attr("x", width / 2)
        .attr("y", height + 40)
        .attr("text-anchor", "middle")
        .text("Hour of Day");

      svg.append("g").call(d3.axisLeft(y));

      svg.append("text")
        .attr("transform", "rotate(-90)")
        .attr("y", -30)
        .attr("x", -height / 2)
        .attr("text-anchor", "middle")
        .text(`${yMetric} (min)`);

      // @ts-ignore
      const tooltip = d3.select(chartRef.current.parentNode)
        .append("div")
        .style("position", "absolute")
        .style("background", "white")
        .style("border", "1px solid #ccc")
        .style("padding", "5px")
        .style("display", "none");

      const drawLine = (year, color) => {
        svg.append("path")
          .datum(chartData)
          .attr("fill", "none")
          .attr("stroke", color)
          .attr("stroke-width", 2)
          .attr("d", d3.line()
            // @ts-ignore
            .x(d => x(d.hour))
            .y(d => y(d[year])))
          .attr("stroke-dasharray", function () {
            const length = this.getTotalLength();
            return `${length} ${length}`;
          })
          .attr("stroke-dashoffset", function () {
            return this.getTotalLength();
          })
          .transition()
          .duration(1000)
          .attr("stroke-dashoffset", 0);

        svg.selectAll(`.dot-${year}`)
          .data(chartData)
          .enter().append("circle")
          .attr("class", `dot-${year}`)
          // @ts-ignore
          .attr("cx", d => x(d.hour))
          .attr("cy", d => y(d[year]))
          .attr("r", 4)
          .attr("fill", color)
          .on("mouseover", (event, d) => {
            // @ts-ignore
            const hour = d.hour;
            const ampm = hour >= 12 ? "PM" : "AM";
            const displayHour = hour % 12 === 0 ? 12 : hour % 12;
            const formattedTime = `${displayHour} ${ampm}`;
            tooltip.style("display", "block").html(`${year} - ${formattedTime}<br/>${d[year]} mins ${yMetric}`);
          })
          .on("mousemove", (event) => {
            tooltip.style("left", `${event.pageX + 10}px`).style("top", `${event.pageY - 20}px`);
          })
          .on("mouseout", () => {
            tooltip.style("display", "none");
          });
      };

      drawLine("2020", "#8884d8");
      drawLine("2045", "#82ca9d");

      // Add legend to top right
      svg.append("circle").attr("cx", width - 40).attr("cy", 3).attr("r", 6).style("fill", "#8884d8");
      svg.append("text").attr("x", width - 30).attr("y", 4).text("2020").style("font-size", "12px").attr("alignment-baseline", "middle");

      svg.append("circle").attr("cx", width - 40).attr("cy", 23).attr("r", 6).style("fill", "#82ca9d");
      svg.append("text").attr("x", width - 30).attr("y", 24).text("2045").style("font-size", "12px").attr("alignment-baseline", "middle");
    };

    renderChart();

    const resizeObserver = new ResizeObserver(() => {
      renderChart();
    });

    resizeObserver.observe(chartRef.current);

    return () => {
      resizeObserver.disconnect();
    };

  }, [selectedRoute, direction, chartData]);

  return (

    <div className="flex gap-4 p-0 w-full h-full">
      {/* Left column: Map with overlayed filter box */}
      <div className="relative w-1/2 ">
        <div ref={mapContainer} className="h-[400px] w-full rounded-lg border shadow-md" />
        <div className="absolute top-2 left-2 bg-white p-2 border shadow-md rounded-md w-32 z-10 opacity-90 text-sm">
          <h2 className="text-lg font-semibold mb-1">Direction</h2>
          <div className="flex gap-1 flex-col">
            {["nb", "sb"].map((dir) => (
              <button
                key={dir}
                onClick={() => setDirection(dir)}
                className={`px-2 py-1 rounded-md text-sm capitalize border 
                  ${direction === dir ? "bg-blue-600 text-white border-blue-600" : "bg-white text-gray-800 border-gray-300 hover:bg-gray-100"}`}
              >
                {dir === "nb" ? "Northbound" : "Southbound"}
              </button>
            ))}
          </div>
        </div>

        {/* Floating Filter Box */}
        <div className="absolute top-32 left-2 bg-white p-2 border shadow-md rounded-md w-32 z-10 opacity-90 text-sm">
          <h2 className="text-lg font-semibold mb-1">Route</h2>
          <div className="flex flex-wrap gap-1">
            {routes.map((route) => (
              <button
                key={route.id}
                onClick={() => setSelectedRoute(route.id)}
                className={`px-2 py-1 rounded-md text-xs text-left border 
                  ${selectedRoute === route.id ? "bg-blue-600 text-white border-blue-600" : "bg-white text-gray-800 border-gray-300 hover:bg-gray-100"}`}
              >
                {route.label}  
              </button>
            ))}
          </div>
        </div>
        
        <div className="absolute top-2 right-2 bg-white p-2 border shadow-md rounded-lg opacity-90">
          <p className="text-md font-semibold mb-0">Distance: {routeMiles} miles</p>
        </div>
      </div>

      {/* Right column: Chart */}
      <div className="w-1/2 bg-white border shadow-md rounded-lg h-[400px]">
        <h2 className="text-lg font-semibold pt-4 pl-4 pb-1">Travel Time Trends</h2>
        <div className="flex flex-col items-center h-full pb-4" ref={chartRef} />
      </div>
    </div>
  );
};

export default MapComponent;
